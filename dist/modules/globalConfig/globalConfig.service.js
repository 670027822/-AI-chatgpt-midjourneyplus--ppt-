'use strict';function _0x37cb(){const _0x47d549=['firstRegisterSendStatus','env','HttpException','chatGptKey:','globalConfigs','save','16944160UZTVaB','nineAiToken','48iZkExF','百度敏感词配置检测失败，您的参数可能配置的不正确!','metadata','payWechatStatus','noticeInfo','SONG_AI_KEY','OfficialService','appMenuHeaderBgUrl','chatGptKey','Key','checsongshu','copyrightTitle','auth','mjProxyImgUrl','default','BAD_REQUEST','@nestjs/typeorm','robotAvatar','baiduTextSecretKey','Logger','mjUseBaiduFy','wechat\x20refresh\x20access_token\x20\x20==>\x20','baiduCode','signInStatus','inviteGiveSendModel3Count','configs','ip验证通过','ModelsService','wechat','getPhoneVerifyConfig','1131208WeNbLw','responseData','getNamespace','decorate','phoneLoginStatus','noticeTitle','openaiBaseUrl','createHash','ISDEV','exit','update','获取微信access_token失败、错误信息：','payWeChatPublicKey','mjProxy','MjdrawCount','TRUE','initGetAllConfig','configKey','access_token','huihuaegxs','isAutoOpenNotice','ChatLogEntity','InjectRepository','https://aip.baidubce.com/oauth/2.0/token?client_id=','baiduTextApiKey','./../chatLog/chatLog.entity','filingNumber','3212712uslyXV','payMpayStatus','application/json','registerSendDrawMjCount','Like','__param','请配置正确的秘钥、当前秘钥检测不通过！','queryNotice','isUseWxLogin','post','onModuleInit','NINEAI','mjHideNotBlock','wechatOfficialAppSecret','nineai','configEntity','get','1019487exdDWN','setConfig','ticket','companyName','find','getConfigs','error:\x20','aliPhoneTemplateCode','vxNumber','payHupiStatus','chatLogEntity','invitedGuestSendModel3Count','readFileSync','siteName','typeorm','function','delete','getWechatAccessToken','signInModel3Count','SONG_AI_HOST','axios','queryAllConfig','forEach','queryliudonggg','morenzhuti','domain','assign','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','HttpStatus','mjHideWorkIn','map','invitedGuestSendModel4Count','GlobalConfigService','payMpayChannel','data','NAMESPACE','getDiffArray','payEpayStatus','queryFrontConfig','salesBaseRatio','emailLoginStatus','defineProperty','inviteGiveSendModel4Count','debug','createOrUpdate','firstRregisterSendModel4Count','Injectable','&client_secret=','design:paramtypes','wechatAccessToken','aliPhoneAccessKeySecret','baidu','63XjLCov','1674136AiGQid','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','log','liudonggg','user','wechatRegisterStatus','registerBaseUrl','appMenuHeaderTips','payEpayApiPayUrl','fetchJsapiTicket','支付功能暂未开放!','设置完成！','error','api验证通过','hideString','授权验证不通过，请联系官方客服v：670027822购买正版授权','signInMjDrawToken','configVal','隐私内容、非超级管理员无权查看','fetchBaseAccessToken','qqNumber','baiduTextStatus','includes','json','hupi','filter','tencent','Repository','&grant_type=client_credentials','769825WVjzXy','getOwnPropertyDescriptor','every','md5','package.json','setGptKeys','nineaiBuiltInSensitiveAuthKey','baiduTextAccessToken','&type=jsapi','error_description','./config.entity','findOne','siteRobotName','clientFavoIconPath','https://gpt.mylaws.top/auth.php','registerSendModel4Count','length','hex','substring','aliPhoneAccessKeyId','wechatJsapiTicket','nineaiBuiltInSensitiveStatus','Status','wechatOfficialAppId','version','queryzhuti','inviteGiveSendDrawMjCount','__decorate','super','../../common/utils','wechatSilentLoginStatus','@nestjs/common','pay','queryPayType','3czksMc','手机验证码功能暂未开放!','getCopyright','3249240PuJVXq','isVerifyEmail','H7D3NJ','ConfigEntity','object','设置配置信息错误！','phoneRegisterStatus','copyrightUrl','inviteSendStatus','getSensitiveConfig','modelsService','签到功能暂未开放!','toUpperCase','initBaiduSensitive'];_0x37cb=function(){return _0x47d549;};return _0x37cb();}const _0x2fa94c=_0x3c44;function _0x3c44(_0x1dd6d8,_0x557618){const _0x37cbad=_0x37cb();return _0x3c44=function(_0x3c4484,_0x1d2312){_0x3c4484=_0x3c4484-0x9e;let _0x50eb40=_0x37cbad[_0x3c4484];return _0x50eb40;},_0x3c44(_0x1dd6d8,_0x557618);}(function(_0x2c0360,_0x1c3b21){const _0x4456f6=_0x3c44,_0x2fd8cb=_0x2c0360();while(!![]){try{const _0x19a012=parseInt(_0x4456f6(0xbc))/0x1+-parseInt(_0x4456f6(0x167))/0x2*(parseInt(_0x4456f6(0x130))/0x3)+parseInt(_0x4456f6(0xab))/0x4+parseInt(_0x4456f6(0x133))/0x5+parseInt(_0x4456f6(0x149))/0x6*(-parseInt(_0x4456f6(0x10e))/0x7)+-parseInt(_0x4456f6(0xf1))/0x8*(-parseInt(_0x4456f6(0xf0))/0x9)+-parseInt(_0x4456f6(0x147))/0xa;if(_0x19a012===_0x1c3b21)break;else _0x2fd8cb['push'](_0x2fd8cb['shift']());}catch(_0x2c1947){_0x2fd8cb['push'](_0x2fd8cb['shift']());}}}(_0x37cb,0xc2b7a));var __decorate=this&&this[_0x2fa94c(0x129)]||function(_0x2ddb2f,_0x1aa42b,_0x5e3286,_0x57cc06){const _0xb6fb8a=_0x2fa94c;var _0x275f7a=arguments[_0xb6fb8a(0x11e)],_0x16509e=_0x275f7a<0x3?_0x1aa42b:_0x57cc06===null?_0x57cc06=Object[_0xb6fb8a(0x10f)](_0x1aa42b,_0x5e3286):_0x57cc06,_0x3f0fc1;if(typeof Reflect===_0xb6fb8a(0x137)&&typeof Reflect['decorate']===_0xb6fb8a(0xcb))_0x16509e=Reflect[_0xb6fb8a(0x16a)](_0x2ddb2f,_0x1aa42b,_0x5e3286,_0x57cc06);else{for(var _0x418fba=_0x2ddb2f['length']-0x1;_0x418fba>=0x0;_0x418fba--)if(_0x3f0fc1=_0x2ddb2f[_0x418fba])_0x16509e=(_0x275f7a<0x3?_0x3f0fc1(_0x16509e):_0x275f7a>0x3?_0x3f0fc1(_0x1aa42b,_0x5e3286,_0x16509e):_0x3f0fc1(_0x1aa42b,_0x5e3286))||_0x16509e;}return _0x275f7a>0x3&&_0x16509e&&Object[_0xb6fb8a(0xe5)](_0x1aa42b,_0x5e3286,_0x16509e),_0x16509e;},__metadata=this&&this['__metadata']||function(_0x1218c6,_0x93b106){const _0x1686de=_0x2fa94c;if(typeof Reflect===_0x1686de(0x137)&&typeof Reflect[_0x1686de(0x14b)]===_0x1686de(0xcb))return Reflect['metadata'](_0x1218c6,_0x93b106);},__param=this&&this[_0x2fa94c(0xb0)]||function(_0x16b1eb,_0x1f0f4d){return function(_0x4cafad,_0x39f795){_0x1f0f4d(_0x4cafad,_0x39f795,_0x16b1eb);};};Object[_0x2fa94c(0xe5)](exports,'__esModule',{'value':!![]}),exports[_0x2fa94c(0xdc)]=void 0x0;const models_service_1=require('./../models/models.service'),chatLog_entity_1=require(_0x2fa94c(0xa9)),common_1=require(_0x2fa94c(0x12d)),config_entity_1=require(_0x2fa94c(0x118)),typeorm_1=require(_0x2fa94c(0x159)),typeorm_2=require(_0x2fa94c(0xca)),utils_1=require(_0x2fa94c(0x12b)),axios_1=require(_0x2fa94c(0xd0)),fs=require('fs'),packageJsonContent=fs[_0x2fa94c(0xc8)](_0x2fa94c(0x112),'utf-8'),packageJson=JSON['parse'](packageJsonContent),version=packageJson[_0x2fa94c(0x126)];console['log']('\x20current\x20use\x20version\x20in\x20------>:\x20',version);let GlobalConfigService=class GlobalConfigService{constructor(_0x1bbc17,_0x2d596e,_0x413fe4){const _0x52359c=_0x2fa94c;this[_0x52359c(0xba)]=_0x1bbc17,this[_0x52359c(0xc6)]=_0x2d596e,this[_0x52359c(0x13d)]=_0x413fe4,this[_0x52359c(0x145)]={},this[_0x52359c(0x148)]=!![];}async[_0x2fa94c(0xb5)](){const _0x4fe2f0=_0x2fa94c;await this[_0x4fe2f0(0xa0)]();}async[_0x2fa94c(0xc1)](_0x204ec8){const _0x546a24=_0x2fa94c;if(_0x204ec8[_0x546a24(0x11e)]===0x0)return;if(_0x204ec8['includes'](_0x546a24(0xed))&&_0x204ec8[_0x546a24(0x11e)]===0x1)return this['wechatAccessToken'];if(_0x204ec8['includes']('wechatJsapiTicket')&&_0x204ec8['length']===0x1)return this[_0x546a24(0x122)];if(_0x204ec8[_0x546a24(0x11e)]===0x1)return this[_0x546a24(0x145)][_0x204ec8[0x0]];else{const _0x14017c={};return _0x204ec8[_0x546a24(0xd2)](_0x329507=>_0x14017c[_0x329507]=this[_0x546a24(0x145)][_0x329507]),_0x14017c;}}async[_0x2fa94c(0xa0)](){const _0x23db10=_0x2fa94c,_0x14937e=await this['configEntity'][_0x23db10(0xc0)]();this[_0x23db10(0x145)]=_0x14937e['reduce']((_0x52142f,_0x3a54fe)=>{const _0x75b151=_0x23db10;return _0x52142f[_0x3a54fe['configKey']]=_0x3a54fe[_0x75b151(0x102)],_0x52142f;},{}),this[_0x23db10(0x140)]();}async[_0x2fa94c(0x140)](_0x2597e5=!![]){const _0x5d1f8b=_0x2fa94c,{baiduTextApiKey:_0x5965c6,baiduTextSecretKey:_0x75f4cd}=await this[_0x5d1f8b(0xc1)]([_0x5d1f8b(0xa8),_0x5d1f8b(0x15b)]);if(!_0x5965c6||!_0x75f4cd){common_1['Logger'][_0x5d1f8b(0xfd)]('百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!',_0x5d1f8b(0xdc));return;}const _0x5da684={'Content-Type':'application/json','Accept':_0x5d1f8b(0xad)},_0x430ec3=_0x5d1f8b(0xa7)+_0x5965c6+_0x5d1f8b(0xeb)+_0x75f4cd+_0x5d1f8b(0x10d);try{const _0x4a8210=await axios_1[_0x5d1f8b(0x157)][_0x5d1f8b(0xb4)](_0x430ec3,{'headers':_0x5da684});this[_0x5d1f8b(0x145)][_0x5d1f8b(0x115)]=_0x4a8210[_0x5d1f8b(0xde)][_0x5d1f8b(0xa2)];}catch(_0x21dea9){if(_0x2597e5)common_1[_0x5d1f8b(0x15c)][_0x5d1f8b(0xfd)](_0x5d1f8b(0x14a),_0x5d1f8b(0xdc));else throw new common_1[(_0x5d1f8b(0x143))](_0x21dea9['response'][_0x5d1f8b(0xde)][_0x5d1f8b(0x117)],common_1[_0x5d1f8b(0xd8)][_0x5d1f8b(0x158)]);}}async['getWechatAccessToken'](_0x5ef951=![]){const _0x5b19c0=_0x2fa94c,{wechatOfficialAppId:_0x5a666d,wechatOfficialAppSecret:_0x43ca7c}=await this[_0x5b19c0(0xc1)]([_0x5b19c0(0x125),'wechatOfficialAppSecret']);if(!_0x5a666d||!_0x43ca7c)return common_1['Logger'][_0x5b19c0(0xfd)](_0x5b19c0(0xd7),_0x5b19c0(0x14f));this[_0x5b19c0(0xed)]=await this[_0x5b19c0(0x104)](_0x5a666d,_0x43ca7c,_0x5ef951),this[_0x5b19c0(0x122)]=await this[_0x5b19c0(0xfa)](this['wechatAccessToken']),common_1[_0x5b19c0(0x15c)][_0x5b19c0(0xf3)](_0x5b19c0(0x15e)+this[_0x5b19c0(0xed)],_0x5b19c0(0x14f));}async[_0x2fa94c(0x104)](_0xdae2a,_0x10ca2f,_0x754fc3=![]){const _0x47a04b=_0x2fa94c;if(process[_0x47a04b(0x142)]['ISDEV']===_0x47a04b(0x9f))return;const {data:{errmsg:_0x80faef,access_token:_0x390a25}}=await axios_1[_0x47a04b(0x157)][_0x47a04b(0xbb)]('https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='+_0xdae2a+'&secret='+_0x10ca2f);if(_0x80faef){if(_0x754fc3)common_1[_0x47a04b(0x15c)]['error'](_0x47a04b(0x172)+_0x80faef,_0x47a04b(0x14f));else throw new common_1['HttpException'](_0x47a04b(0xb1),common_1['HttpStatus'][_0x47a04b(0x158)]);return'';}return _0x390a25;}async['fetchJsapiTicket'](_0x4dfa44){const _0xa7e0dd=_0x2fa94c;var _0x131a7b;if(process[_0xa7e0dd(0x142)][_0xa7e0dd(0x16f)]===_0xa7e0dd(0x9f))return;const _0xa8090a=await axios_1[_0xa7e0dd(0x157)][_0xa7e0dd(0xbb)](_0xa7e0dd(0xf2)+_0x4dfa44+_0xa7e0dd(0x116));return(_0x131a7b=_0xa8090a===null||_0xa8090a===void 0x0?void 0x0:_0xa8090a[_0xa7e0dd(0xde)])===null||_0x131a7b===void 0x0?void 0x0:_0x131a7b[_0xa7e0dd(0xbe)];}async[_0x2fa94c(0xd1)](_0x55494e){const _0x4f1560=_0x2fa94c,{role:_0x419128}=_0x55494e[_0x4f1560(0xf5)];return this[_0x4f1560(0x145)];}async[_0x2fa94c(0xe2)](_0x44cb9b,_0x743806){const _0x1a8c3d=_0x2fa94c,_0x5ab5e2=[_0x1a8c3d(0xc4),'registerSendStatus','registerSendModel3Count',_0x1a8c3d(0x11d),_0x1a8c3d(0xae),_0x1a8c3d(0x141),'firstRegisterSendRank','firstRregisterSendModel3Count',_0x1a8c3d(0xe9),'firstRregisterSendDrawMjCount',_0x1a8c3d(0x13b),_0x1a8c3d(0x161),_0x1a8c3d(0xe6),_0x1a8c3d(0x128),_0x1a8c3d(0xc7),_0x1a8c3d(0xdb),'invitedGuestSendDrawMjCount','clientHomePath','clientLogoPath',_0x1a8c3d(0x11b),_0x1a8c3d(0xb3),_0x1a8c3d(0xc9),_0x1a8c3d(0x15a),_0x1a8c3d(0x11a),'buyCramiAddress','mindDefaultData',_0x1a8c3d(0x15f),'payEpayChannel',_0x1a8c3d(0xdd),_0x1a8c3d(0xf9),_0x1a8c3d(0xe1),_0x1a8c3d(0xc5),_0x1a8c3d(0x14c),_0x1a8c3d(0xac),_0x1a8c3d(0xa4),'isShowAppCatIcon',_0x1a8c3d(0xe3),'salesSeniorRatio','salesAllowDrawMoney',_0x1a8c3d(0xbf),_0x1a8c3d(0xaa),_0x1a8c3d(0x139),'emailRegisterStatus',_0x1a8c3d(0xe4),_0x1a8c3d(0x16b),_0x1a8c3d(0xf6),_0x1a8c3d(0x12c),_0x1a8c3d(0x160),'signInModel3Count','signInModel4Count',_0x1a8c3d(0x101),_0x1a8c3d(0xf8),_0x1a8c3d(0x150),_0x1a8c3d(0x15d),_0x1a8c3d(0xb7),_0x1a8c3d(0xd9),_0x1a8c3d(0x134),_0x1a8c3d(0xa3),_0x1a8c3d(0xd4)],_0x461a97=await this[_0x1a8c3d(0xba)][_0x1a8c3d(0xc0)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x5ab5e2)}}),{domain:_0x127844}=_0x44cb9b,_0x3ab2b2=this[_0x1a8c3d(0x145)][_0x1a8c3d(0xd5)];_0x3ab2b2!==_0x127844&&(this[_0x1a8c3d(0xe8)]({'configKey':_0x1a8c3d(0xd5),'configVal':_0x127844,'status':0x1}),await this['initGetAllConfig']());const _0x1826ea=_0x461a97['reduce']((_0x14c47f,_0x410a2d)=>{const _0x15f8fc=_0x1a8c3d;return _0x14c47f[_0x410a2d['configKey']]=_0x410a2d[_0x15f8fc(0x102)],_0x14c47f;},{}),{wechatOfficialAppId:_0x1c881d,wechatOfficialAppSecret:_0x3f5c71}=await this[_0x1a8c3d(0xc1)]([_0x1a8c3d(0x125),_0x1a8c3d(0xb8)]),_0x29dde5=!!(_0x1c881d&&_0x3f5c71);return Object[_0x1a8c3d(0xd6)](Object[_0x1a8c3d(0xd6)]({},_0x1826ea),{'isUseWxLogin':_0x29dde5});}async['queryGptKeys'](_0x44e0fe){const _0x213049=_0x2fa94c,{role:_0x2a83a0}=_0x44e0fe[_0x213049(0xf5)],_0xab8d07=await this[_0x213049(0xba)][_0x213049(0xc0)]({'where':{'configKey':(0x0,typeorm_2[_0x213049(0xaf)])('%'+'chatGptKey'+'%')}});if(_0x2a83a0===_0x213049(0x12a))return _0xab8d07;return _0xab8d07[_0x213049(0xda)](_0xbf0d41=>{const _0x590657=_0x213049;return _0xbf0d41['configVal']=(0x0,utils_1['hideString'])(_0xbf0d41[_0x590657(0x102)]),_0xbf0d41;});}async[_0x2fa94c(0x113)](_0x2c697b){const _0x1fa138=_0x2fa94c,_0x10c4c0=_0x2c697b[_0x1fa138(0x162)][_0x1fa138(0x10a)](_0x1759e8=>_0x1759e8[_0x1fa138(0x102)]),_0x187a6d=_0x10c4c0[_0x1fa138(0xda)](_0xc7d0b=>_0xc7d0b[_0x1fa138(0xa1)]);for(const [_0x1b7a6e,_0x558dd3]of _0x10c4c0['entries']()){const {configKey:_0x544f80,configVal:_0x19ebe5,status:_0x46c4ce}=_0x558dd3;await this[_0x1fa138(0xe8)]({'configKey':_0x1fa138(0x144)+(_0x1b7a6e+0x1),'configVal':_0x19ebe5,'status':_0x46c4ce});}const _0x917878=await this['configEntity'][_0x1fa138(0xc0)]({'where':{'configKey':(0x0,typeorm_2[_0x1fa138(0xaf)])('%'+_0x1fa138(0x151)+'%')}}),_0x37d0b3=_0x917878['map'](_0x15a91d=>_0x15a91d[_0x1fa138(0xa1)]);if(_0x37d0b3[_0x1fa138(0x11e)]>_0x187a6d[_0x1fa138(0x11e)]){const _0x3e0b44=(0x0,utils_1[_0x1fa138(0xe0)])(_0x37d0b3[_0x1fa138(0x11e)],_0x187a6d['length'],'chatGptKey:');for(const _0xba7e97 of _0x3e0b44){await this['configEntity'][_0x1fa138(0xcc)]({'configKey':_0xba7e97});}}return await this[_0x1fa138(0xa0)](),'操作完成！';}async['queryConfig'](_0x284c1a,_0xc7e118){const _0x2b3f0b=_0x2fa94c,{role:_0x43eaa8}=_0xc7e118[_0x2b3f0b(0xf5)],{keys:_0x28057e}=_0x284c1a,_0x3f764d=await this['configEntity'][_0x2b3f0b(0xc0)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x28057e)}});return _0x43eaa8!==_0x2b3f0b(0x12a)&&_0x3f764d[_0x2b3f0b(0xd2)](_0x2a904e=>{const _0x2943c2=_0x2b3f0b;if(_0x2a904e[_0x2943c2(0xa1)][_0x2943c2(0x107)]('mj')||_0x2a904e[_0x2943c2(0xa1)][_0x2943c2(0x107)](_0x2943c2(0x152))||_0x2a904e['configKey'][_0x2943c2(0x107)]('gpt')||_0x2a904e[_0x2943c2(0xa1)][_0x2943c2(0x107)]('cos')||_0x2a904e[_0x2943c2(0xa1)][_0x2943c2(0x107)](_0x2943c2(0xef))||_0x2a904e['configKey'][_0x2943c2(0x107)]('ali')||_0x2a904e['configKey'][_0x2943c2(0x107)](_0x2943c2(0x10b))||_0x2a904e['configKey'][_0x2943c2(0x107)](_0x2943c2(0x12e))||_0x2a904e[_0x2943c2(0xa1)]['includes'](_0x2943c2(0x165))||_0x2a904e['configKey']['includes'](_0x2943c2(0x156))||_0x2a904e[_0x2943c2(0xa1)]===_0x2943c2(0x16d)){const _0x84f9b6=[_0x2943c2(0x173),'payWeChatPrivateKey'];if(_0x84f9b6[_0x2943c2(0x107)](_0x2a904e[_0x2943c2(0xa1)]))return _0x2a904e[_0x2943c2(0x102)]=(0x0,utils_1[_0x2943c2(0xff)])(_0x2a904e[_0x2943c2(0x102)],_0x2943c2(0x103));const _0x2cceca=[_0x2943c2(0xe1),_0x2943c2(0xc5),_0x2943c2(0x174)];!_0x2cceca[_0x2943c2(0x107)](_0x2a904e['configKey'])&&!_0x2a904e[_0x2943c2(0xa1)][_0x2943c2(0x107)](_0x2943c2(0x124))&&(_0x2a904e['configVal']=(0x0,utils_1[_0x2943c2(0xff)])(_0x2a904e['configVal']));}}),_0x3f764d['reduce']((_0x87bb47,_0x74700a)=>{const _0x3c3f31=_0x2b3f0b;return _0x87bb47[_0x74700a[_0x3c3f31(0xa1)]]=_0x74700a['configVal'],_0x87bb47;},{});}['getNineAiToken'](){const _0xd2f05a=_0x2fa94c,_0x36f329=this[_0xd2f05a(0x145)][_0xd2f05a(0x9e)],_0x226ceb=this[_0xd2f05a(0x148)];return!_0x226ceb||Number(_0x36f329)===0x1;}async[_0x2fa94c(0xbd)](_0x93864f){const _0x1b4bb3=_0x2fa94c;try{const {settings:_0x37d534}=_0x93864f;for(const _0x112216 of _0x37d534){await this[_0x1b4bb3(0xe8)](_0x112216);}await this[_0x1b4bb3(0xa0)]();const _0x543291=_0x37d534[_0x1b4bb3(0xda)](_0x226b91=>_0x226b91['configKey']);return(_0x543291['includes']('baiduTextApiKey')||_0x543291[_0x1b4bb3(0x107)](_0x1b4bb3(0x15b)))&&await this['initBaiduSensitive'](![]),(_0x543291[_0x1b4bb3(0x107)](_0x1b4bb3(0x125))||_0x543291[_0x1b4bb3(0x107)](_0x1b4bb3(0xb8)))&&await this[_0x1b4bb3(0xcd)](),_0x1b4bb3(0xfc);}catch(_0x317fa1){console['log'](_0x1b4bb3(0xc2),_0x317fa1);}}async[_0x2fa94c(0xe8)](_0x55d508){const _0x3330f5=_0x2fa94c;try{const {configKey:_0x2ccea5,configVal:_0x52e551,status:status=0x1}=_0x55d508,_0x3152e3=await this[_0x3330f5(0xba)][_0x3330f5(0x119)]({'where':{'configKey':_0x2ccea5}});if(_0x3152e3){const _0x245b96=await this[_0x3330f5(0xba)][_0x3330f5(0x171)]({'configKey':_0x2ccea5},{'configVal':_0x52e551,'status':status});}else{const _0x4e87a3=await this[_0x3330f5(0xba)][_0x3330f5(0x146)]({'configKey':_0x2ccea5,'configVal':_0x52e551,'status':status});}}catch(_0x389e4d){console[_0x3330f5(0xf3)]('error:\x20',_0x389e4d);throw new common_1[(_0x3330f5(0x143))](_0x3330f5(0x138),common_1[_0x3330f5(0xd8)][_0x3330f5(0x158)]);}}async[_0x2fa94c(0xb2)](){const _0x3746cb=_0x2fa94c;return await this['getConfigs']([_0x3746cb(0x14d),_0x3746cb(0x16c)]);}async[_0x2fa94c(0xd3)](){const _0x6c0020=_0x2fa94c;return await this[_0x6c0020(0xc1)]([_0x6c0020(0xf4)]);}async[_0x2fa94c(0x127)](){const _0x1f03fd=_0x2fa94c;return await this[_0x1f03fd(0xc1)](['morenzhuti']);}async[_0x2fa94c(0x132)](){const _0x5d51ad=_0x2fa94c;return await this['getConfigs']([_0x5d51ad(0x13a),_0x5d51ad(0x154)]);}async[_0x2fa94c(0x12f)](){const _0x4ac05e=_0x2fa94c,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this['getConfigs'](['payHupiStatus',_0x4ac05e(0xe1),_0x4ac05e(0xac),'payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x4ac05e(0x110)](_0x39dbfb=>_0x39dbfb===0x0))throw new common_1['HttpException'](_0x4ac05e(0xfb),common_1[_0x4ac05e(0xd8)][_0x4ac05e(0x158)]);if(Number(payWechatStatus)===0x1)return _0x4ac05e(0x165);if(Number(payEpayStatus)===0x1)return'epay';if(Number(payMpayStatus)===0x1)return'mpay';if(Number(payHupiStatus)===0x1)return _0x4ac05e(0x109);}async['getAuthInfo'](){const _0x3e2e58=_0x2fa94c,{siteName:_0x30155f,qqNumber:_0x57e063,vxNumber:_0x191c8e,registerBaseUrl:_0x496844,domain:_0x1f35b4}=await this['getConfigs'](['siteName',_0x3e2e58(0x105),_0x3e2e58(0xc4),_0x3e2e58(0xf7),_0x3e2e58(0xd5)]);return{'siteName':_0x30155f,'qqNumber':_0x57e063,'vxNumber':_0x191c8e,'registerBaseUrl':_0x496844,'domain':_0x1f35b4};}async[_0x2fa94c(0x166)](){const _0x1b2c3f=_0x2fa94c,{phoneRegisterStatus:_0x5e602c,aliPhoneAccessKeyId:_0x26c7a1,aliPhoneAccessKeySecret:_0x5a7ea0,aliPhoneSignName:_0x281bbe,aliPhoneTemplateCode:_0x71aa5d}=await this[_0x1b2c3f(0xc1)](['phoneRegisterStatus',_0x1b2c3f(0x121),_0x1b2c3f(0xee),'aliPhoneSignName',_0x1b2c3f(0xc3)]);if(Number(_0x5e602c)!==0x1)throw new common_1[(_0x1b2c3f(0x143))](_0x1b2c3f(0x131),common_1[_0x1b2c3f(0xd8)][_0x1b2c3f(0x158)]);return{'accessKeyId':_0x26c7a1,'accessKeySecret':_0x5a7ea0,'SignName':_0x281bbe,'TemplateCode':_0x71aa5d};}[_0x2fa94c(0x169)](){const _0x5d430f=_0x2fa94c;return process[_0x5d430f(0x142)][_0x5d430f(0xdf)]||_0x5d430f(0xb6);}async['getSignatureGiftConfig'](){const _0x55bc8d=_0x2fa94c,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x55bc8d(0xc1)]([_0x55bc8d(0x160),_0x55bc8d(0xce),'signInModel4Count','signInMjDrawToken']);if(Number(signInStatus)!==0x1)throw new common_1['HttpException'](_0x55bc8d(0x13e),common_1['HttpStatus']['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x2fa94c(0x13c)](){const _0x1e749c=_0x2fa94c,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x40e42b,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x5fb3e5,nineaiBuiltInSensitiveAuthKey:_0x4ec912}=await this[_0x1e749c(0xc1)]([_0x1e749c(0x106),_0x1e749c(0x115),_0x1e749c(0x123),'nineaiBuiltInSensitiveApiBase',_0x1e749c(0x114)]);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x40e42b};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x1e749c(0xb9),'nineaiBuiltInSensitiveApiBase':_0x5fb3e5,'nineaiBuiltInSensitiveAuthKey':_0x4ec912};return null;}async[_0x2fa94c(0x155)](){const _0x98b790=_0x2fa94c,_0x54b999=_0x98b790(0x11c),_0x77b4a5=process[_0x98b790(0x142)][_0x98b790(0xcf)],_0x253a5a=await fetch(_0x54b999,{}),_0x155805=await _0x253a5a[_0x98b790(0x108)](),{success:success=!![],message:_0xb61a01}=_0x155805;console[_0x98b790(0xf3)](_0x98b790(0x168),_0x155805),!success?(common_1[_0x98b790(0x15c)][_0x98b790(0xfd)]('授权信息错误:',_0xb61a01),common_1[_0x98b790(0x15c)][_0x98b790(0xfd)](_0x98b790(0x100)),process[_0x98b790(0x170)](0x1)):common_1[_0x98b790(0x15c)][_0x98b790(0xe7)](_0x98b790(0x163));}async[_0x2fa94c(0x153)](){const _0x3e0930=_0x2fa94c,_0x5779bd=process[_0x3e0930(0x142)][_0x3e0930(0xcf)],_0x25848a=process[_0x3e0930(0x142)][_0x3e0930(0x14e)],_0x5e2e73=require('crypto'),_0x28742d=_0x5779bd+_0x3e0930(0x135),_0x39008e=_0x5e2e73[_0x3e0930(0x16e)](_0x3e0930(0x111))[_0x3e0930(0x171)](_0x28742d,'utf8')['digest'](_0x3e0930(0x11f))[_0x3e0930(0x13f)](),_0xaffdad=_0x39008e[_0x3e0930(0x120)](0x8,0x18);_0xaffdad===_0x25848a?console[_0x3e0930(0xf3)](_0x3e0930(0xfe)):(console[_0x3e0930(0xf3)]('秘钥验证不通过，请联系官方客服v：670027822购买正版授权'),process['exit'](0x1));}};GlobalConfigService=__decorate([(0x0,common_1[_0x2fa94c(0xea)])(),__param(0x0,(0x0,typeorm_1[_0x2fa94c(0xa6)])(config_entity_1[_0x2fa94c(0x136)])),__param(0x1,(0x0,typeorm_1[_0x2fa94c(0xa6)])(chatLog_entity_1[_0x2fa94c(0xa5)])),__metadata(_0x2fa94c(0xec),[typeorm_2['Repository'],typeorm_2[_0x2fa94c(0x10c)],models_service_1[_0x2fa94c(0x164)]])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;