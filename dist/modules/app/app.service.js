'use strict';const _0xc599d6=_0x253f;function _0x253f(_0x12f0f2,_0x4f106b){const _0x46f4f7=_0x46f4();return _0x253f=function(_0x253f7b,_0x181b2e){_0x253f7b=_0x253f7b-0x87;let _0x4940cd=_0x46f4f7[_0x253f7b];return _0x4940cd;},_0x253f(_0x12f0f2,_0x4f106b);}(function(_0x58edea,_0x4e7739){const _0x29736f=_0x253f,_0x30bbb6=_0x58edea();while(!![]){try{const _0x328e81=-parseInt(_0x29736f(0xf2))/0x1*(-parseInt(_0x29736f(0x89))/0x2)+parseInt(_0x29736f(0xb4))/0x3*(parseInt(_0x29736f(0xa4))/0x4)+-parseInt(_0x29736f(0xbb))/0x5+-parseInt(_0x29736f(0xbc))/0x6*(parseInt(_0x29736f(0xc6))/0x7)+parseInt(_0x29736f(0xc0))/0x8*(parseInt(_0x29736f(0x9d))/0x9)+-parseInt(_0x29736f(0xb3))/0xa+parseInt(_0x29736f(0x9c))/0xb*(parseInt(_0x29736f(0x92))/0xc);if(_0x328e81===_0x4e7739)break;else _0x30bbb6['push'](_0x30bbb6['shift']());}catch(_0x2b31fa){_0x30bbb6['push'](_0x30bbb6['shift']());}}}(_0x46f4,0xe2afd));var __decorate=this&&this[_0xc599d6(0xad)]||function(_0x302840,_0x45eaf2,_0x25f985,_0x1feb1d){const _0x25bb3d=_0xc599d6;var _0x12fb85=arguments[_0x25bb3d(0x99)],_0x2e6951=_0x12fb85<0x3?_0x45eaf2:_0x1feb1d===null?_0x1feb1d=Object['getOwnPropertyDescriptor'](_0x45eaf2,_0x25f985):_0x1feb1d,_0x2dadcd;if(typeof Reflect===_0x25bb3d(0xc4)&&typeof Reflect[_0x25bb3d(0x9a)]===_0x25bb3d(0xc3))_0x2e6951=Reflect[_0x25bb3d(0x9a)](_0x302840,_0x45eaf2,_0x25f985,_0x1feb1d);else{for(var _0x4c0cb7=_0x302840[_0x25bb3d(0x99)]-0x1;_0x4c0cb7>=0x0;_0x4c0cb7--)if(_0x2dadcd=_0x302840[_0x4c0cb7])_0x2e6951=(_0x12fb85<0x3?_0x2dadcd(_0x2e6951):_0x12fb85>0x3?_0x2dadcd(_0x45eaf2,_0x25f985,_0x2e6951):_0x2dadcd(_0x45eaf2,_0x25f985))||_0x2e6951;}return _0x12fb85>0x3&&_0x2e6951&&Object[_0x25bb3d(0xb8)](_0x45eaf2,_0x25f985,_0x2e6951),_0x2e6951;},__metadata=this&&this['__metadata']||function(_0x5a1fdf,_0x48ad89){const _0x1a8647=_0xc599d6;if(typeof Reflect===_0x1a8647(0xc4)&&typeof Reflect[_0x1a8647(0xbe)]===_0x1a8647(0xc3))return Reflect[_0x1a8647(0xbe)](_0x5a1fdf,_0x48ad89);},__param=this&&this['__param']||function(_0x47201c,_0x2a4b2a){return function(_0x346fcc,_0x2ef1c8){_0x2a4b2a(_0x346fcc,_0x2ef1c8,_0x47201c);};};function _0x46f4(){const _0x3e33e4=['demoData','修改App信息失败！','AppCatsEntity','length','decorate','应用审核通过','99kmKWPZ','1892367ewXfLl','取消收藏失败！','findAndCount','checkIfAppIsCollected','@nestjs/common','取消收藏成功!','findOne','36104wsGxsg','update','该应用名称已存在！','AppEntity','catId','rows','queryOneCat','HttpStatus','******','__decorate','AppService','UserAppsEntity','Not','appEntity','status','6132070mAptdU','318EcSvJH','user','MoreThan','./userApps.entity','defineProperty','delApp','缺失必要参数！','6211975fqBbWG','24TPhxaT','BAD_REQUEST','metadata','customApp','40prVnYD','删除应用成功！','updateAppCats','function','object','该分类下存在App，不可删除！','1663711uTNzch','DESC','mineApps','des','includes','appCatsList','已将应用加入到我的个人工作台！','super','userId','./app.entity','该应用已被用户关联使用中，不可删除！','@nestjs/typeorm','createApp','forEach','appId','name','role','delete','您正在操作一个不存在的资源！','count','处理收藏操作时发生错误','affected','HttpException','应用审核拒绝完成','delAppCat','./appCats.entity','log','删除成功','Repository','split','该分类不存在！','save','auditPass','delMineApp','createAppCat','您正在编辑一个不存在的应用！','updateApp','removeCollection','删除App失败！','修改成功','collect','应用不存在','该应用不存在！','catName','31QOeeMu','map','auditFail','userAppsEntity','coverImg','78350ObXzck','InjectRepository','appName','appCatsEntity','appRole','preset','INTERNAL_SERVER_ERROR','该分类名称已存在！','system','683076nhnqko','addCollection','find','Like'];_0x46f4=function(){return _0x3e33e4;};return _0x46f4();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0xc599d6(0xae)]=void 0x0;const common_1=require(_0xc599d6(0xa1)),appCats_entity_1=require(_0xc599d6(0xdf)),typeorm_1=require('typeorm'),typeorm_2=require(_0xc599d6(0xd1)),app_entity_1=require(_0xc599d6(0xcf)),userApps_entity_1=require(_0xc599d6(0xb7));let AppService=class AppService{constructor(_0x3df190,_0x4f36d5,_0x411300){const _0xd1bf09=_0xc599d6;this[_0xd1bf09(0x8c)]=_0x3df190,this[_0xd1bf09(0xb1)]=_0x4f36d5,this[_0xd1bf09(0x87)]=_0x411300;}async[_0xc599d6(0xe8)](_0x207246){const _0x39afe2=_0xc599d6,{name:_0x103f58}=_0x207246,_0x2c8874=await this[_0x39afe2(0x8c)][_0x39afe2(0xa3)]({'where':{'name':_0x103f58}});if(_0x2c8874)throw new common_1[(_0x39afe2(0xdc))](_0x39afe2(0x90),common_1[_0x39afe2(0xab)][_0x39afe2(0xbd)]);return await this[_0x39afe2(0x8c)][_0x39afe2(0xe5)](_0x207246);}async[_0xc599d6(0xde)](_0x346f71){const _0x3e2102=_0xc599d6,{id:_0x14210a}=_0x346f71,_0x4066db=await this[_0x3e2102(0x8c)][_0x3e2102(0xa3)]({'where':{'id':_0x14210a}});if(!_0x4066db)throw new common_1['HttpException']('该分类不存在！',common_1[_0x3e2102(0xab)][_0x3e2102(0xbd)]);const _0x3e2a1f=await this[_0x3e2102(0xb1)][_0x3e2102(0xd9)]({'where':{'catId':_0x14210a}});if(_0x3e2a1f>0x0)throw new common_1['HttpException'](_0x3e2102(0xc5),common_1[_0x3e2102(0xab)][_0x3e2102(0xbd)]);const _0x196d44=await this[_0x3e2102(0x8c)][_0x3e2102(0xd7)](_0x14210a);if(_0x196d44[_0x3e2102(0xdb)]>0x0)return _0x3e2102(0xe1);throw new common_1['HttpException']('删除失败！',common_1['HttpStatus']['BAD_REQUEST']);}async[_0xc599d6(0xc2)](_0x54b589){const _0x303764=_0xc599d6,{id:_0xd257ca,name:_0x575db6}=_0x54b589,_0x2050e1=await this[_0x303764(0x8c)][_0x303764(0xa3)]({'where':{'name':_0x575db6,'id':(0x0,typeorm_1[_0x303764(0xb0)])(_0xd257ca)}});if(_0x2050e1)throw new common_1[(_0x303764(0xdc))](_0x303764(0x90),common_1[_0x303764(0xab)][_0x303764(0xbd)]);const _0x559dd5=await this[_0x303764(0x8c)][_0x303764(0xa5)]({'id':_0xd257ca},_0x54b589);if(_0x559dd5[_0x303764(0xdb)]>0x0)return _0x303764(0xed);throw new common_1['HttpException']('修改失败！',common_1['HttpStatus'][_0x303764(0xbd)]);}async[_0xc599d6(0xaa)](_0x45b1dc){const _0x2653a8=_0xc599d6,{id:_0x9aacce}=_0x45b1dc;if(!_0x9aacce)throw new common_1[(_0x2653a8(0xdc))](_0x2653a8(0xba),common_1[_0x2653a8(0xab)][_0x2653a8(0xbd)]);const _0x4b0159=await this[_0x2653a8(0xb1)][_0x2653a8(0xa3)]({'where':{'id':_0x9aacce}}),{demoData:_0xf3a865,coverImg:_0x1ec3e1,des:_0x369f8f,name:_0x12a385}=_0x4b0159;return{'demoData':_0xf3a865?_0xf3a865[_0x2653a8(0xe3)]('\x0a'):[],'coverImg':_0x1ec3e1,'des':_0x369f8f,'name':_0x12a385};}async[_0xc599d6(0xcb)](_0x44e7e9){const _0x3fe331=_0xc599d6,{page:page=0x1,size:size=0xa,name:_0x1ca38b,status:_0x2389a8}=_0x44e7e9,_0x242633={};_0x1ca38b&&(_0x242633['name']=(0x0,typeorm_1[_0x3fe331(0x95)])('%'+_0x1ca38b+'%')),[0x0,0x1,'0','1'][_0x3fe331(0xca)](_0x2389a8)&&(_0x242633[_0x3fe331(0xb2)]=_0x2389a8);const [_0x55e7a3,_0x481495]=await this[_0x3fe331(0x8c)][_0x3fe331(0x9f)]({'where':_0x242633,'order':{'order':_0x3fe331(0xc7)},'skip':(page-0x1)*size,'take':size}),_0x437f84=_0x55e7a3[_0x3fe331(0xf3)](_0x3db492=>_0x3db492['id']),_0x537f91=await this['appEntity'][_0x3fe331(0x94)]({'where':{'catId':(0x0,typeorm_1['In'])(_0x437f84)}}),_0x2f936c={};return _0x537f91[_0x3fe331(0xd3)](_0x44d470=>{const _0x44de51=_0x3fe331;_0x2f936c[_0x44d470['catId']]?_0x2f936c[_0x44d470[_0x44de51(0xa8)]]+=0x1:_0x2f936c[_0x44d470[_0x44de51(0xa8)]]=0x1;}),_0x55e7a3['forEach'](_0x4495c4=>_0x4495c4['appCount']=_0x2f936c[_0x4495c4['id']]||0x0),{'rows':_0x55e7a3,'count':_0x481495};}async['appList'](_0x17bee5,_0x577a10,_0x477450='id'){const _0x177981=_0xc599d6;var _0x838333;const {page:page=0x1,size:size=0xa,name:_0x1ef73,status:_0x30ce23,catId:_0x4d96bd,role:_0x370c17}=_0x577a10,_0x3c31bb={};_0x1ef73&&(_0x3c31bb[_0x177981(0xd5)]=(0x0,typeorm_1[_0x177981(0x95)])('%'+_0x1ef73+'%')),_0x4d96bd&&(_0x3c31bb[_0x177981(0xa8)]=_0x4d96bd),_0x370c17&&(_0x3c31bb['role']=_0x370c17),_0x30ce23&&(_0x3c31bb[_0x177981(0xb2)]=_0x30ce23);const [_0x2de3e5,_0x432a4d]=await this['appEntity']['findAndCount']({'where':_0x3c31bb,'order':{[_0x477450]:'DESC'},'skip':(page-0x1)*size,'take':size}),_0x79d6c4=_0x2de3e5[_0x177981(0xf3)](_0x1687e9=>_0x1687e9['catId']),_0x2675db=await this[_0x177981(0x8c)]['find']({'where':{'id':(0x0,typeorm_1['In'])(_0x79d6c4)}});return _0x2de3e5[_0x177981(0xd3)](_0x15dc8c=>{const _0x531b23=_0x177981,_0x1ffb0e=_0x2675db['find'](_0x2b72ac=>_0x2b72ac['id']===_0x15dc8c[_0x531b23(0xa8)]);_0x15dc8c[_0x531b23(0xf1)]=_0x1ffb0e?_0x1ffb0e['name']:'';}),((_0x838333=_0x17bee5===null||_0x17bee5===void 0x0?void 0x0:_0x17bee5[_0x177981(0xb5)])===null||_0x838333===void 0x0?void 0x0:_0x838333['role'])!==_0x177981(0xcd)&&_0x2de3e5[_0x177981(0xd3)](_0xe9a88=>{const _0x58e039=_0x177981;delete _0xe9a88[_0x58e039(0x8e)];}),{'rows':_0x2de3e5,'count':_0x432a4d};}async['frontAppList'](_0x29575e,_0x421fdc,_0x2a96d9='id'){const _0x4bb14f=_0xc599d6;var _0x4881b2;const {page:page=0x1,size:size=0x3e8,name:_0x2231da,catId:_0x470dc1,role:_0x319132}=_0x421fdc,_0x21bacf=[{'status':(0x0,typeorm_1['In'])([0x1,0x4]),'userId':(0x0,typeorm_1['IsNull'])(),'public':![]},{'userId':(0x0,typeorm_1[_0x4bb14f(0xb6)])(0x0),'public':!![]}],[_0x5be7e3,_0x1de451]=await this[_0x4bb14f(0xb1)][_0x4bb14f(0x9f)]({'where':_0x21bacf,'order':{'order':'DESC'},'skip':(page-0x1)*size,'take':size}),_0x3201df=_0x5be7e3[_0x4bb14f(0xf3)](_0x59bccf=>_0x59bccf[_0x4bb14f(0xa8)]),_0x119b06=await this[_0x4bb14f(0x8c)][_0x4bb14f(0x94)]({'where':{'id':(0x0,typeorm_1['In'])(_0x3201df)}});return _0x5be7e3['forEach'](_0x5779de=>{const _0x2a051b=_0x4bb14f,_0x3b394e=_0x119b06[_0x2a051b(0x94)](_0x36c859=>_0x36c859['id']===_0x5779de[_0x2a051b(0xa8)]);_0x5779de[_0x2a051b(0xf1)]=_0x3b394e?_0x3b394e[_0x2a051b(0xd5)]:'';}),((_0x4881b2=_0x29575e===null||_0x29575e===void 0x0?void 0x0:_0x29575e[_0x4bb14f(0xb5)])===null||_0x4881b2===void 0x0?void 0x0:_0x4881b2[_0x4bb14f(0xd6)])!==_0x4bb14f(0xcd)&&_0x5be7e3[_0x4bb14f(0xd3)](_0x5be15f=>{delete _0x5be15f['preset'];}),{'rows':_0x5be7e3,'count':_0x1de451};}async[_0xc599d6(0xd2)](_0x44b19d){const _0x4e203d=_0xc599d6,{name:_0x224ae9,catId:_0x4a0e36}=_0x44b19d;_0x44b19d[_0x4e203d(0xd6)]=_0x4e203d(0x91);const _0x5c5f5b=await this[_0x4e203d(0xb1)][_0x4e203d(0xa3)]({'where':{'name':_0x224ae9}});if(_0x5c5f5b)throw new common_1[(_0x4e203d(0xdc))](_0x4e203d(0xa6),common_1[_0x4e203d(0xab)][_0x4e203d(0xbd)]);const _0x5720e5=await this[_0x4e203d(0x8c)][_0x4e203d(0xa3)]({'where':{'id':_0x4a0e36}});if(!_0x5720e5)throw new common_1[(_0x4e203d(0xdc))](_0x4e203d(0xe4),common_1[_0x4e203d(0xab)][_0x4e203d(0xbd)]);return await this[_0x4e203d(0xb1)][_0x4e203d(0xe5)](_0x44b19d);}async[_0xc599d6(0xbf)](_0x160747,_0x5eb8d4){const _0x119c66=_0xc599d6,{id:_0x1f9b4d}=_0x5eb8d4[_0x119c66(0xb5)],{name:_0xa02607,catId:_0x69d492,des:_0x5548ca,preset:_0x5d4d27,coverImg:_0x4fcd90,demoData:_0x2a289d,public:_0x19acfc,appId:_0x493c7d}=_0x160747;if(_0x493c7d){const _0x4aae6b=await this['appEntity'][_0x119c66(0xa3)]({'where':{'id':_0x493c7d,'userId':_0x1f9b4d}});if(!_0x4aae6b)throw new common_1['HttpException'](_0x119c66(0xe9),common_1[_0x119c66(0xab)][_0x119c66(0xbd)]);const _0x599d13={'name':_0xa02607,'catId':_0x69d492,'des':_0x5548ca,'preset':_0x5d4d27,'coverImg':_0x4fcd90,'demoData':_0x2a289d,'public':_0x19acfc,'status':_0x19acfc?0x3:0x1},_0x1aaf02=await this[_0x119c66(0xb1)][_0x119c66(0xa5)]({'id':_0x493c7d,'userId':_0x1f9b4d},_0x599d13);if(_0x1aaf02[_0x119c66(0xdb)])return _0x119c66(0xed);else throw new common_1[(_0x119c66(0xdc))]('修改失败！',common_1[_0x119c66(0xab)]['BAD_REQUEST']);}if(!_0x493c7d){const _0x1e7bf7=await this[_0x119c66(0x8c)][_0x119c66(0xa3)]({'where':{'id':_0x69d492}});if(!_0x1e7bf7)throw new common_1['HttpException'](_0x119c66(0xe4),common_1[_0x119c66(0xab)][_0x119c66(0xbd)]);const _0x15ddcd=await this['appEntity'][_0x119c66(0xa3)]({'where':{'name':_0xa02607}});if(_0x15ddcd)throw new common_1[(_0x119c66(0xdc))](_0x119c66(0xa6),common_1[_0x119c66(0xab)]['BAD_REQUEST']);const _0x1d8752={'name':_0xa02607,'catId':_0x69d492,'des':_0x5548ca,'preset':_0x5d4d27,'coverImg':_0x4fcd90,'status':_0x19acfc?0x3:0x1,'demoData':_0x2a289d,'public':_0x19acfc,'role':'user','userId':_0x1f9b4d},_0x527038=await this[_0x119c66(0xb1)][_0x119c66(0xe5)](_0x1d8752),_0x199b33={'appId':_0x527038['id'],'userId':_0x1f9b4d,'appType':_0x119c66(0xb5),'public':_0x19acfc,'status':_0x19acfc?0x3:0x1,'catId':_0x69d492};return this[_0x119c66(0x87)][_0x119c66(0xe5)](_0x199b33);}}async[_0xc599d6(0xea)](_0x5100dd){const _0x322621=_0xc599d6,{id:_0x5c78b5,name:_0x47ea8a,catId:_0x28c79b,status:_0x10d86e}=_0x5100dd,_0x803c17=await this[_0x322621(0xb1)]['findOne']({'where':{'name':_0x47ea8a,'id':(0x0,typeorm_1[_0x322621(0xb0)])(_0x5c78b5)}});if(_0x803c17)throw new common_1['HttpException']('该应用名称已存在！',common_1[_0x322621(0xab)][_0x322621(0xbd)]);const _0x452b48=await this[_0x322621(0x8c)][_0x322621(0xa3)]({'where':{'id':_0x28c79b}});if(!_0x452b48)throw new common_1[(_0x322621(0xdc))]('该分类不存在！',common_1[_0x322621(0xab)][_0x322621(0xbd)]);const _0x229073=await this['appEntity']['findOne']({'where':{'id':_0x5c78b5}});_0x229073[_0x322621(0xb2)]!==_0x5100dd[_0x322621(0xb2)]&&await this[_0x322621(0x87)][_0x322621(0xa5)]({'appId':_0x5c78b5},{'status':_0x10d86e});const _0x54d8ae=await this[_0x322621(0xb1)][_0x322621(0xa5)]({'id':_0x5c78b5},_0x5100dd);if(_0x54d8ae[_0x322621(0xdb)]>0x0)return'修改App信息成功';throw new common_1[(_0x322621(0xdc))](_0x322621(0x97),common_1[_0x322621(0xab)][_0x322621(0xbd)]);}async[_0xc599d6(0xb9)](_0x2910ee){const _0x40e887=_0xc599d6,{id:_0xeed5a5}=_0x2910ee,_0x1051d9=await this['appEntity'][_0x40e887(0xa3)]({'where':{'id':_0xeed5a5}});if(!_0x1051d9)throw new common_1[(_0x40e887(0xdc))]('该应用不存在！',common_1[_0x40e887(0xab)][_0x40e887(0xbd)]);const _0x4eab39=await this[_0x40e887(0x87)]['count']({'where':{'appId':_0xeed5a5}});if(_0x4eab39>0x0)throw new common_1[(_0x40e887(0xdc))](_0x40e887(0xd0),common_1[_0x40e887(0xab)][_0x40e887(0xbd)]);const _0x30fc7b=await this[_0x40e887(0xb1)][_0x40e887(0xd7)](_0xeed5a5);if(_0x30fc7b[_0x40e887(0xdb)]>0x0)return'删除App成功';throw new common_1[(_0x40e887(0xdc))](_0x40e887(0xec),common_1[_0x40e887(0xab)][_0x40e887(0xbd)]);}async[_0xc599d6(0xe6)](_0x1f8694){const _0x46e49c=_0xc599d6,{id:_0x2b77ce}=_0x1f8694,_0xd07266=await this['appEntity'][_0x46e49c(0xa3)]({'where':{'id':_0x2b77ce,'status':0x3}});if(!_0xd07266)throw new common_1[(_0x46e49c(0xdc))](_0x46e49c(0xf0),common_1[_0x46e49c(0xab)][_0x46e49c(0xbd)]);return await this[_0x46e49c(0xb1)][_0x46e49c(0xa5)]({'id':_0x2b77ce},{'status':0x4}),await this['userAppsEntity']['update']({'appId':_0x2b77ce},{'status':0x4}),_0x46e49c(0x9b);}async[_0xc599d6(0xf4)](_0x414d3b){const _0x34edbf=_0xc599d6,{id:_0x2c6f4d}=_0x414d3b,_0x3e2f30=await this[_0x34edbf(0xb1)][_0x34edbf(0xa3)]({'where':{'id':_0x2c6f4d,'status':0x3}});if(!_0x3e2f30)throw new common_1[(_0x34edbf(0xdc))](_0x34edbf(0xf0),common_1[_0x34edbf(0xab)]['BAD_REQUEST']);return await this[_0x34edbf(0xb1)][_0x34edbf(0xa5)]({'id':_0x2c6f4d},{'status':0x5}),await this[_0x34edbf(0x87)][_0x34edbf(0xa5)]({'appId':_0x2c6f4d},{'status':0x5}),_0x34edbf(0xdd);}async[_0xc599d6(0xe7)](_0x195199,_0x1b08ce){const _0x32aff8=_0xc599d6,{id:_0x2a06b0}=_0x195199,_0x3d28d5=await this[_0x32aff8(0xb1)][_0x32aff8(0xa3)]({'where':{'id':_0x2a06b0,'userId':_0x1b08ce['user']['id']}});if(!_0x3d28d5)throw new common_1[(_0x32aff8(0xdc))](_0x32aff8(0xd8),common_1[_0x32aff8(0xab)]['BAD_REQUEST']);return await this[_0x32aff8(0xb1)][_0x32aff8(0xd7)](_0x2a06b0),await this['userAppsEntity'][_0x32aff8(0xd7)]({'appId':_0x2a06b0,'userId':_0x1b08ce[_0x32aff8(0xb5)]['id']}),_0x32aff8(0xc1);}async[_0xc599d6(0xee)](_0x11c38c,_0x5c9d7f){const _0x429643=_0xc599d6;try{const {appId:_0x2e7f44}=_0x11c38c,{id:_0x31c073}=_0x5c9d7f[_0x429643(0xb5)],_0x2fe0a4=await this[_0x429643(0xa0)](_0x2e7f44,_0x31c073);return _0x2fe0a4?(await this[_0x429643(0xeb)](_0x2e7f44,_0x31c073),_0x429643(0xa2)):(await this['addCollection'](_0x2e7f44,_0x31c073),_0x429643(0xcc));}catch(_0x46ea87){throw new common_1[(_0x429643(0xdc))](_0x429643(0xda),common_1['HttpStatus'][_0x429643(0x8f)]);}}async['checkIfAppIsCollected'](_0x1c8771,_0x26cded){const _0x23517f=_0xc599d6,_0x466653=await this[_0x23517f(0x87)][_0x23517f(0xa3)]({'where':{'appId':_0x1c8771,'userId':_0x26cded}});return!!_0x466653;}async[_0xc599d6(0xeb)](_0x151507,_0x44535f){const _0x463569=_0xc599d6,_0x767b19=await this[_0x463569(0x87)][_0x463569(0xd7)]({'appId':_0x151507,'userId':_0x44535f});if(_0x767b19[_0x463569(0xdb)]===0x0)throw new common_1[(_0x463569(0xdc))](_0x463569(0x9e),common_1[_0x463569(0xab)][_0x463569(0xbd)]);}async[_0xc599d6(0x93)](_0x1d9822,_0x10de67){const _0xc9b782=_0xc599d6,_0x54f19b=await this[_0xc9b782(0xb1)]['findOne']({'where':{'id':_0x1d9822}});if(!_0x54f19b)throw new common_1[(_0xc9b782(0xdc))](_0xc9b782(0xef),common_1['HttpStatus']['BAD_REQUEST']);const {id:_0x46b035,role:_0x33b38a,catId:_0xe5e98d}=_0x54f19b,_0x5ca794={'userId':_0x10de67,'appId':_0x46b035,'catId':_0xe5e98d,'appRole':_0x33b38a,'public':!![],'status':0x1};await this['userAppsEntity']['save'](_0x5ca794);}async[_0xc599d6(0xc8)](_0x2625f3,_0xb80090={'page':0x1,'size':0x1e}){const _0x5b8761=_0xc599d6,{id:_0x15fd51}=_0x2625f3[_0x5b8761(0xb5)],{page:page=0x1,size:size=0x1e}=_0xb80090,[_0x1bbe45,_0x10e82e]=await this[_0x5b8761(0x87)]['findAndCount']({'where':{'userId':_0x15fd51,'status':(0x0,typeorm_1['In'])([0x1,0x3,0x4,0x5])},'order':{'id':_0x5b8761(0xc7)},'skip':(page-0x1)*size,'take':size}),_0x61fea7=_0x1bbe45[_0x5b8761(0xf3)](_0xa4f3d8=>_0xa4f3d8[_0x5b8761(0xd4)]),_0x8b60c3=await this['appEntity'][_0x5b8761(0x94)]({'where':{'id':(0x0,typeorm_1['In'])(_0x61fea7)}});return _0x1bbe45[_0x5b8761(0xd3)](_0x58cb84=>{const _0xdb9dc3=_0x5b8761,_0x1fa301=_0x8b60c3[_0xdb9dc3(0x94)](_0x17a14d=>_0x17a14d['id']===_0x58cb84['appId']);_0x58cb84[_0xdb9dc3(0x8b)]=_0x1fa301?_0x1fa301[_0xdb9dc3(0xd5)]:'',_0x58cb84[_0xdb9dc3(0x8d)]=_0x1fa301?_0x1fa301[_0xdb9dc3(0xd6)]:'',_0x58cb84['appDes']=_0x1fa301?_0x1fa301[_0xdb9dc3(0xc9)]:'',_0x58cb84[_0xdb9dc3(0x88)]=_0x1fa301?_0x1fa301[_0xdb9dc3(0x88)]:'',_0x58cb84[_0xdb9dc3(0x96)]=_0x1fa301?_0x1fa301[_0xdb9dc3(0x96)]:'',_0x58cb84['preset']=_0x1fa301[_0xdb9dc3(0xce)]===_0x15fd51?_0x1fa301[_0xdb9dc3(0x8e)]:_0xdb9dc3(0xac);}),console[_0x5b8761(0xe0)](_0x5b8761(0xa9),_0x1bbe45),console['log'](_0x5b8761(0xd9),_0x10e82e),{'rows':_0x1bbe45,'count':_0x10e82e};}};AppService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2['InjectRepository'])(appCats_entity_1[_0xc599d6(0x98)])),__param(0x1,(0x0,typeorm_2[_0xc599d6(0x8a)])(app_entity_1[_0xc599d6(0xa7)])),__param(0x2,(0x0,typeorm_2[_0xc599d6(0x8a)])(userApps_entity_1[_0xc599d6(0xaf)])),__metadata('design:paramtypes',[typeorm_1[_0xc599d6(0xe2)],typeorm_1[_0xc599d6(0xe2)],typeorm_1[_0xc599d6(0xe2)]])],AppService),exports[_0xc599d6(0xae)]=AppService;