import{i as st,M as zt,H as Ke,m as qt,a as Ut,C as Nt,D as Pt,R as Gt,u as Ft,h as Ot}from"./useIconRender-612377fe.js";import{d as de,aa as pe,e as ye,u as $e,b as f,o as d,c as C,j as e,C as Y,ab as Ye,ac as We,F as Ie,p as U,k as t,a5 as et,r as b,ad as S,a6 as Qe,n as A,t as ne,i as p,l as m,z as Xe,y as ue,g as Se,a9 as _e,h as Te,ae as Ht,f as tt,af as rt,J as q,A as X,K as ke,m as ze,a8 as ct,R as ut,U as Ze,ah as Vt,S as dt,H as Jt,ai as at,w as xe,aj as Kt,ak as Yt,N as lt,al as Wt,am as it,a as Xt,an as Qt}from"./index-b6f4ce48.js";import{c as pt}from"./index-c94da121.js";import"./katex-d97319dc.js";const Zt={key:1,class:"text-[28px] dark:text-white"},eo=t("img",{src:"https://00-1301532507.cos.ap-shanghai.myqcloud.com/%E8%87%AA%E7%94%A8%2Fppt.jpg",alt:"ppt生成助手头像",style:{width:"1em",height:"1em"}},null,-1),to=de({__name:"Avatar",props:{image:{type:Boolean}},setup(o){const u=pe(),{isMobile:i}=ye(),h=$e(),c=f(()=>h.userInfo.avatar),w=f(()=>{var I;return((I=v.value)==null?void 0:I.appLogo)||h.globalConfig.robotAvatar}),v=f(()=>u.groupList.find(I=>I.uuid===u.active));return(I,_)=>o.image?(d(),C(Ie,{key:0},[e(st)(e(c))&&e(c).length>0?(d(),Y(e(We),{key:0,size:e(i)?32:42,src:e(c),"fallback-src":e(Ye)},null,8,["size","src","fallback-src"])):(d(),Y(e(We),{key:1,size:e(i)?32:42,src:e(Ye)},null,8,["size","src"]))],64)):(d(),C("span",Zt,[e(st)(e(w))&&e(w).length>0?(d(),Y(e(We),{key:0,style:{"background-color":"transparent"},size:(e(i),32),src:e(w),"fallback-src":e(Ye)},null,8,["size","src","fallback-src"])):U("",!0),eo]))}}),Me="/assets/pptbg-83d0d52f.jpg",oo="/assets/titlebg-b19c25d0.png",no="/assets/niao-7981b5c6.png",so="/assets/mlbg-737718c3.png",ao="/assets/jieshu-bc327927.png",lo={key:0,class:"flex flex-col items-start"},io={class:"w-full"},ro=["innerHTML"],co=["textContent"],uo={class:"mt-3",style:{"margin-top":"0.2rem",display:"flex","justify-content":"space-between",width:"100%"}},po=t("span",{class:"text-xs"},"复制",-1),ho=t("span",{class:"ml-4"},null,-1),fo=t("span",{class:"text-xs"},"删除",-1),go=t("span",{class:"ml-4"},null,-1),mo=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 15 15"},[t("path",{fill:"currentColor",d:"M3 8h.5a.5.5 0 0 0 0-1H3zm4 0h.5a.5.5 0 0 0 0-1H7z"}),t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M1 1.5A1.5 1.5 0 0 1 2.5 0h8.207L14 3.293V13.5a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 1 13.5zM2 6h1.5a1.5 1.5 0 1 1 0 3H3v2H2zm4 0h1.5a1.5 1.5 0 1 1 0 3H7v2H6zm5 5h1V7h1V6h-3v1h1z","clip-rule":"evenodd"})],-1),vo=t("span",{class:"text-xs"},"一键生成",-1),xo=t("span",{class:"ml-4"},null,-1),yo=t("span",{class:"text-xs"},"重答",-1),bo={key:1},wo=["textContent"],_o=de({__name:"Text",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean},loadingbf:{type:Boolean}},emits:["regenerate","delete","copy","yuyin"],setup(o,{expose:u,emit:i}){const h=o;et();const{isMobile:c}=ye(),w=b(),v=new zt({linkify:!0,highlight(l,r){if(!!(r&&Ke.getLanguage(r))){const V=r??"";return g(Ke.highlight(l,{language:V}).value,V)}return g(Ke.highlightAuto(l).value,"")}});v.use(qt,{attrs:{target:"_blank",rel:"noopener"}}),v.use(Ut,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const I=f(()=>["text-wrap","min-w-[20px]","rounded-md",c.value?"p-2":"px-3 py-2",h.inversion?"bg-[#846EF7]":"bg-[#ebebeb]",h.inversion?"text-[#fff]":"text-[#000]",h.inversion?"dark:bg-[#846EF7]":"dark:bg-[#1e1e20]",h.inversion?"message-request":"message-reply",{"text-red-500":h.error}]),_=f(()=>{const l=h.text??"";return h.asRawText?l:v.render(l)});function g(l,r){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${r}</span><span class="code-block-header__copy">${S("chat.copyCode")}</span></div><code class="hljs code-block-body ${r}">${l}</code></pre>`}function T(){i("regenerate")}function B(){i("copy")}function k(){i("delete")}b(!1),Qe(()=>{}),u({textRef:w});function R(){var l=document.querySelectorAll(".textys"),r=null,O=Number.MAX_VALUE;l.forEach(function(J){var N=J.getBoundingClientRect(),L=Math.sqrt(Math.pow(event.clientX-(N.left+N.width/2),2)+Math.pow(event.clientY-(N.top+N.height),2));L<O&&(O=L,r=J)});var V=r,M=V.innerText;if(console.log(M),M.length>3e3){$("#fileError").show();return}else $("#fileError").hide();$("#submitError").text("已进行打印，请等待查看"),$("#submitError").show();const le=M.split("########");console.log("slideTexts",le),setTimeout(function(){G(le),ae()},2e3)}function W(){let l=new Date().getTime(),r=localStorage.getItem("lastSubmitTime");return console.log(l-+r),l-+r>5e3}function H(){const r=new Date().getTime();localStorage.setItem("lastSubmitTime",r)}function x(l){const r=l.match(/####(.*?)####/),O=/####(.*?)####/,V=l.replace(O,""),M=l.match(/@@(.*?)@@/)||V;return{title:r?r[1].trim():"",body:M?Array.isArray(M)?M[1].trim():M.trim():""}}function G(l){const r=new PptxGenJS;l.forEach((V,M)=>{const le=V.trim(),{title:J,body:N}=x(le),L=r.addSlide();M===0?(L.background={color:"cce1f4"},L.addImage({path:Me,x:"0%",y:"0%",w:"100%",h:"100%"}).addImage({path:no,x:"50%",y:"0%",w:"50%",h:"50%"}),J!==""&&(L.addText(J,{x:"6%",y:"41%",w:"50%",h:"13%",fontSize:36,color:"191706",bold:!0,align:"left",rectRadius:20}),N&&L.addText(N,{x:"6%",y:"80%",w:"80%",h:"13%",fontSize:16,color:"000000",lineSpacing:28,bold:!0}))):M===1?(L.background={color:"cce1f4"},L.addImage({path:Me,x:"0%",y:"0%",w:"100%",h:"100%"}).addImage({path:so,x:"53%",y:"27%",w:"33%",h:"48%"}),J!==""&&(L.addText(J,{x:"53%",y:"44%",w:"33%",h:"13%",fontSize:28,color:"2f2add",bold:!0,align:"center",rectRadius:20}),N&&L.addText(N,{x:"10%",y:"21%",w:"80%",h:"74%",fontSize:20,color:"000000",lineSpacing:35}))):(L.background={color:"cce1f4"},L.addImage({path:Me,x:"0%",y:"0%",w:"100%",h:"100%"}).addImage({path:oo,x:"10%",y:"6%",w:"80%",h:"13%"}),J!==""&&(L.addText(J,{x:"10%",y:"6%",w:"80%",h:"13%",fontSize:24,color:"2f2add",bold:!0,align:"center",rectRadius:20}),N&&L.addText(N,{x:"10%",y:"21%",w:"80%",h:"74%",fontSize:16,color:"000000",lineSpacing:28})))});const O=r.addSlide();O.background={color:"cce1f4"},O.addImage({path:Me,x:"0%",y:"0%",w:"100%",h:"100%"}).addImage({path:ao,x:"0%",y:"15%",w:"61%",h:"85%"}),O.addText("谢谢观看！",{x:"40%",y:"0%",w:"60%",h:"100%",fontSize:40,color:"000000",bold:!0,align:"center",rectRadius:20}),r.writeFile("converted_ppt.pptx").catch(console.error),H(),setTimeout(()=>{$("#submitError").hide()},6e4)}function ee(l){if(l.size>3e3){$("#fileError").show();return}else $("#fileError").hide();$("#submitError").text("已进行打印，请等待查看"),$("#submitError").show();const r=new FileReader;r.onload=function(O){const M=O.target.result.split("########");G(M)},r.readAsText(l)}$("#uploadForm").submit(function(l){if(l.preventDefault(),W()){const r=$("#textFile")[0].files[0];ee(r)}else $("#submitError").text("请等待一分钟后再提交"),$("#submitError").show()});async function F(){se(),R()}function se(){const l=document.createElement("div");l.id="loading-animation",l.innerText="PPT正在生成...",l.style.position="fixed",l.style.left="50%",l.style.top="50%",l.style.transform="translate(-50%, -50%)",l.style.backgroundColor="rgb(62, 62, 62)",l.style.padding="40px",l.style.color="#846EF7",l.style.borderRadius="10px",l.style.zIndex="1000",document.body.appendChild(l);const r=document.createElement("div");r.id="overlay",r.style.position="fixed",r.style.left="0",r.style.top="0",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0.5)",r.style.zIndex="999",document.body.appendChild(r)}function ae(){const l=document.getElementById("loading-animation"),r=document.getElementById("overlay");l&&l.remove(),r&&r.remove()}return(l,r)=>(d(),C("div",{class:A([e(I),"w-full"])},[t("div",{ref_key:"textRef",ref:w,class:"leading-relaxed break-words"},[o.inversion?(d(),C("div",bo,[t("div",{class:"whitespace-pre-wrap",textContent:ne(e(_))},null,8,wo),U("",!0)])):(d(),C("div",lo,[t("div",io,[o.asRawText?(d(),C("div",{key:1,class:"w-full whitespace-pre-wrap textys",textContent:ne(e(_))},null,8,co)):(d(),C("div",{key:0,class:A(["w-full markdown-body textys",[{"markdown-body-generate":o.loading}]]),innerHTML:e(_),id:"textys"},null,10,ro))]),t("div",uo,[p(e(ue),{class:"ml-2",text:"",type:"primary",onClick:B,style:{"--n-text-color":"#5e6472"}},{icon:m(()=>[p(e(Xe),{size:20,component:e(Nt)},null,8,["component"])]),default:m(()=>[po]),_:1}),ho,p(e(ue),{text:"",type:"primary",onClick:k,style:{"--n-text-color":"#5e6472"}},{icon:m(()=>[p(e(Xe),{size:20,component:e(Pt)},null,8,["component"])]),default:m(()=>[fo]),_:1}),go,p(e(ue),{text:"",type:"primary",onClick:F,style:{color:"#846ef7"},id:"generatePPTFromText"},{icon:m(()=>[mo]),default:m(()=>[vo]),_:1}),xo,p(e(ue),{text:"",type:"primary",onClick:T,style:{"--n-text-color":"#5e6472"}},{icon:m(()=>[p(e(Xe),{size:20,component:e(Gt)},null,8,["component"])]),default:m(()=>[yo]),_:1})])]))],512)],2))}});const ko={class:"items-end gap-1 mt-2"},Co=de({__name:"index",props:{dateTime:null,text:null,inversion:{type:Boolean},error:{type:Boolean},loading:{type:Boolean}},emits:["regenerate","delete","yuyin"],setup(o,{emit:u}){const i=o,h=Se();ye();const{iconRender:c}=Ft(),w=b(),v=b(i.inversion),I=b();f(()=>{const k=[{label:S("chat.copy"),key:"copyText",icon:c({icon:"ri:file-copy-2-line"})},{label:S("common.delete"),key:"delete",icon:c({icon:"ri:delete-bin-line"})}];return i.inversion||k.unshift({label:v.value?S("chat.preview"):S("chat.showRawText"),key:"toggleRenderType",icon:c({icon:v.value?"ic:outline-code-off":"ic:outline-code"})}),k});function _(){u("delete")}function g(){u("yuyin")}function T(){pt({text:i.text??""}),i.text&&h.success("复制成功！")}function B(){var k;(k=I.value)==null||k.scrollIntoView(),u("regenerate")}return(k,R)=>(d(),C("div",{style:{"margin-bottom":"0.2rem"},ref_key:"messageRef",ref:I,class:A(["flex w-full mb-6 overflow-hidden items-start",[{"flex-row-reverse":o.inversion}]])},[t("div",{class:A(["flex items-center justify-center flex-shrink-0 mt-1",[o.inversion?"ml-2":"mr-2"]])},[p(to,{image:o.inversion},null,8,["image"])],2),t("div",{class:A(["overflow-hidden text-sm",[o.inversion?"items-end":"items-start"]]),style:{"max-width":"calc(100% - 80px)"}},[t("p",{class:A(["text-xs text-[#b4bbc4]",[o.inversion?"text-right":"text-left"]])},ne(o.dateTime),3),t("div",ko,[p(_o,{ref_key:"textRef",ref:w,inversion:o.inversion,error:o.error,text:o.text,loading:o.loading,"as-raw-text":v.value,onRegenerate:B,onCopy:T,onDelete:_,onYuyin:g},null,8,["inversion","error","text","loading","as-raw-text"])])],2)],2))}});function Io(o,u){let i=!1;return function(){i||(o(),i=!0,setTimeout(()=>{i=!1},u))}}function To(){const o=b(null),u=async()=>{await _e(),o.value&&(o.value.scrollTop=o.value.scrollHeight)},i=async()=>{await _e(),o.value&&(o.value.scrollTop=0)},h=Io(c,100);async function c(){o.value&&o.value.scrollHeight-o.value.scrollTop-o.value.clientHeight<=300&&(o.value.scrollTop=o.value.scrollHeight)}return{scrollRef:o,scrollToBottom:u,scrollToTop:i,scrollToBottomIfAtBottom:h}}function $o(){function o(){document.querySelectorAll(".code-block-wrapper").forEach(i=>{const h=i.querySelector(".code-block-header__copy"),c=i.querySelector(".code-block-body");h&&c&&h.addEventListener("click",()=>{var w;(w=navigator.clipboard)!=null&&w.writeText?navigator.clipboard.writeText(c.textContent??""):pt({text:c.textContent??"",origin:!0})})})}Te(()=>o()),Ht(()=>o())}function So(){const o=pe();return{addGroupChat:c=>{o.addGroupChat(c)},updateGroupChat:(c,w)=>{o.updateGroupChat(c,w)},updateGroupChatSome:(c,w)=>{o.updateGroupChatSome(c,w)}}}function Bo(){const o=Se(),u=pe(),i=f(()=>u.usingContext);function h(){u.setUsingContext(!i.value),i.value?o.success(S("chat.turnOnContext")):o.warning(S("chat.turnOffContext"))}return{usingContext:i,toggleUsingContext:h}}function Ro(){const o=Se(),u=pe(),i=f(()=>u.usingNetwork);function h(){u.setUsingNetwork(!i.value),i.value?o.success("已开启联网模式、上下文状态失效！"):o.warning("已关闭联网模式！")}return{usingNetwork:i,toggleUsingNetwork:h}}function Ao(){const o=b(!1);return{usingduomo:o,toggleUsingDuomo:()=>{o.value=!o.value}}}const Lo={class:"sticky top-0 left-0 right-0 z-30 border-b dark:border-neutral-800 bg-white/80 dark:bg-black/20 backdrop-blur"},Eo={class:"relative flex items-center justify-center min-w-0 overflow-hidden h-14",style:{height:"auto"}},Do={class:"max-w-screen-4xl flex w-full h-full items-center px-4"},jo={key:0,class:"flex items-center"},Mo={class:"flex justify-between items-center h-full w-full"},zo={class:"flex-1 flex ele-drag items-center h-full",style:{width:"40%"}},qo={class:"flex items-center space-x-2"},Uo={class:"text-base text-slate-500 dark:text-slate-400",style:{color:"orange"}},No={class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]"},Po={class:"text-base text-slate-500 dark:text-slate-400"},Go={class:"flex items-center gap-4"},Fo={class:"text-base text-slate-500 dark:text-slate-400",style:{color:"rgb(255, 38, 38)"}},Oo={class:"text-base text-slate-500 dark:text-slate-400"},Ho=de({__name:"index",props:{usingContext:{type:Boolean}},emits:["export","toggleUsingContext","clear","scrollBtn"],setup(o,{emit:u}){const i=$e();et();const h=Se();b({0:"死板",.1:"专业",.2:"准确",.8:"平衡",1:"创造性",1.3:"离谱",1.6:"荒谬"});const c=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],w=f(()=>{if(!I.activeConfig)return;const{modelTypeInfo:F,modelInfo:se}=I.activeConfig;if(!(!F||!se))return`${F==null?void 0:F.label} / ${se.modelName}`}),v=tt(),I=pe(),_=rt(),g=f(()=>v.siderCollapsed);f(()=>I.getChatByGroupInfo());const{isMobile:T}=ye(),B=f(()=>v.theme);function k(){v.setSiderCollapsed(!g.value)}function R(){const F=document.querySelector("#scrollRef");F&&_e(()=>F.scrollTop=0)}function W(){u("clear")}function H(){u("scrollBtn")}function x(){if(_.isChatIn)return h.warning("请等待聊天结束后修改模型信息！");_.updateModelDialog(!0)}const G=f(()=>i.isLogin);function ee(){if(!G.value){i.setLoginDialog(!0);return}_.updateSignInDialog(!0)}return(F,se)=>(d(),C("header",Lo,[t("div",Eo,[t("div",Do,[e(T)?(d(),C("div",jo,[t("button",{class:"flex items-center justify-center w-11 h-11",onClick:k},[e(g)?(d(),Y(e(q),{key:0,class:"text-2xl",icon:"ri:align-justify"})):(d(),Y(e(q),{key:1,class:"text-2xl",icon:"ri:align-right"}))])])):U("",!0),t("div",Mo,[t("div",zo,[t("h1",{class:"flex-1 px-4 font-bold pr-6 overflow-hidden cursor-pointer select-none text-ellipsis whitespace-nowrap",onDblclick:R},null,32)]),t("div",qo,[e(T)?(d(),Y(e(ke),{key:0,trigger:"hover",disabled:e(T)},{trigger:m(()=>[t("button",{style:{color:"orange"},class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]",onClick:ee},[t("span",Uo,[p(e(q),{icon:"ant-design:gift-outlined"})])])]),default:m(()=>[X(" 签到领福利 ")]),_:1},8,["disabled"])):U("",!0),e(T)?(d(),Y(e(ct),{key:1,trigger:"click"},{trigger:m(()=>[t("button",No,[t("span",Po,[p(e(q),{icon:"fluent:dark-theme-24-regular"})])])]),default:m(()=>[t("div",null,[t("div",Go,[(d(),C(Ie,null,ze(c,ae=>p(e(ue),{key:ae.key,size:"small",type:ae.key===e(B)?"info":void 0,onClick:l=>e(v).setTheme(ae.key)},{icon:m(()=>[p(e(q),{icon:ae.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])])]),_:1})):U("",!0),p(e(ke),{trigger:"hover",disabled:e(T),style:{color:"rgb(254, 33, 33)"}},{trigger:m(()=>[t("button",{class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]",onClick:W,style:{color:"rgb(244, 56, 56)"}},[t("span",Fo,[p(e(q),{icon:"ant-design:clear-outlined"})])])]),default:m(()=>[X(" 清空本页聊天记录 ")]),_:1},8,["disabled"]),p(e(ke),{trigger:"hover",disabled:e(T)},{trigger:m(()=>[t("button",{class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]",onClick:H},[t("span",Oo,[p(e(q),{icon:"material-symbols:keyboard-arrow-down"})])])]),default:m(()=>[X(" 滚动到底部 ")]),_:1},8,["disabled"])])])])]),t("div",{class:"absolute left-1/2 top-full -translate-x-1/2 whitespace-nowrap cursor-pointer select-none rounded-b-md border bg-white px-4 dark:border-neutral-700 dark:bg-[#111114] flex items-center hover:text-[#846EF7] transition",onClick:x},[p(e(q),{class:"text-base mr-2",icon:"fluent:flash-sparkle-20-regular"}),X(" "+ne(e(w))+" ",1),p(e(q),{class:"text-2xl",icon:e(_).modelDialog?"ri:arrow-down-s-line":"ri:arrow-right-s-line"},null,8,["icon"])])]))}}),Vo=[{id:1,name:"私人助理",icon:"ri:ai-generate",childList:[{appId:0,prompt:"请年度业绩回报为主题，给我写5页ppt。",title:"业绩汇报ppt"},{id:3,appId:0,prompt:"为我生成日程安排ppt，包括本周重要会议、活动、任务安排等。生成5页ppt。",title:"日程ppt"},{id:4,appId:0,prompt:"根据我最近的旅行计划，生成一份旅行行程ppt，包括出行日期、目的地、酒店预订和旅游景点安排等。生成4页ppt。",title:"旅行行程ppt"}]},{id:2,name:"轻松娱乐",icon:"ri:lightbulb-flash-line",childList:[{id:5,appId:0,prompt:"给我写一份旅游攻略ppt，介绍目的地的风景名胜、特色美食和旅游注意事项。生成3页ppt。”",title:"旅游攻略ppt"},{id:6,appId:0,prompt:"为我生成一份趣味知识抢答ppt，包括多个有趣的问题和答案，每页展示一道问题和答案。生成3页ppt。",title:"趣味抢答ppt"},{id:7,appId:0,prompt:"制作一份音乐知识问答ppt，包括多个音乐相关问题和答案，每页展示一道问题和答案。生成3页ppt。",title:"音乐知识问答"}]},{id:3,name:"AI百科",icon:"ri:book-mark-line",childList:[{id:8,appId:0,prompt:"生成AI基础知识ppt，包括机器学习、深度学习、神经网络等内容，总计3页。",title:"AI知识"},{id:9,appId:0,prompt:"生成AI发展趋势ppt，包括技术前景、产业趋势、未来展望等，总计3页ppt。",title:"AI发展趋势"},{id:10,appId:0,prompt:"生成AI算法原理ppt，包括常用算法原理解析，示例应用和优缺点分析，共3页ppt。",title:"AI算法原理"}]}],Jo=t("h1",{class:"mb-6 rounded px-4 py-2 text-center text-3xl font-bold text-[#3076fd]",style:{color:"#846EF7"}}," PPT生成 ",-1),Ko={class:"w-full md:min-w-[450px]"},Yo={class:"text-md text-center"},Wo={class:"line-clamp-1 break-all overflow-hidden"},Xo=["onClick"],Qo=["src"],Zo={class:"line-clamp-1 break-all overflow-hidden"},en={key:0,class:"mt-4 text-center text-sm text-neutral-400"},tn=de({__name:"index",emits:["prompt"],setup(o,{emit:u}){var _;const i=ut(),h=$e(),c=b([]);async function w(){const g=await Vt();g!=null&&g.data&&(g!=null&&g.data.length)?c.value=g==null?void 0:g.data:c.value=Vo}Te(()=>{w()}),(_=h.globalConfig)!=null&&_.siteRobotName;function v(g){const{appId:T,prompt:B,url:k}=g;if(k){window.open(k);return}T&&T>0?i.push({path:"/chat",query:{appId:T}}):u("prompt",B)}const{isMobile:I}=ye();return(g,T)=>{var B;return d(),C("div",{class:A([[e(I)?"mt-2":"mt-28"],"rounded-md px-4 py-4"])},[Jo,t("div",Ko,[t("div",{class:"grid grid-cols-3 gap-x-2 gap-y-3",style:Ze({gridTemplateColumns:`repeat(${c.value.length}, minmax(0, 1fr))`})},[(d(!0),C(Ie,null,ze(c.value,k=>(d(),C("div",{class:"space-y-4",key:k.id},[t("h2",Yo,[p(e(q),{icon:k.icon,class:"mb-2 inline-block text-lg"},null,8,["icon"]),t("p",Wo,ne(k.name),1)]),(d(!0),C(Ie,null,ze(k.childList,R=>(d(),C("div",{class:"space-y-e",key:R.id},[t("div",{onClick:W=>v(R),class:A(["py-3 flex justify-center items-center rounded cursor-pointer select-none bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-900 dark:hover:bg-neutral-800",[e(I)?"px-2":"px-5"]])},[R.coverImg?(d(),C("img",{key:0,class:"w-4 mr-1",src:R.coverImg,alt:""},null,8,Qo)):U("",!0),t("div",Zo,ne(R.title),1)],10,Xo)]))),128))]))),128))],4),(B=c.value)!=null&&B.length?(d(),C("div",en," 生成小技巧：主题+内容要求+PPT页数！ ")):U("",!0)])],2)}}});function on(){const o=b([]),u=b([]),i=1;function h(v){v.target.nextElementSibling.click()}function c(v){const I=v.target.files;if(I.length>0&&o.value.length<i){const _=I[0],g=3*1024*1024;if(_.size>g){alert("图片大小不能超过3M哦！");return}const T=new FileReader;T.onload=B=>{const k={type:"image_url",image_url:B.target.result};o.value.push(k),u.value.push(B.target.result)},T.readAsDataURL(_),v.target.value=""}}function w(v){u.value.splice(v,1),o.value.splice(v,1)}return{imgs:o,imgsys:u,triggerUpload:h,handleImageUpload:c,deleteImage:w}}const nn={class:"h-full flex flex-col bg-white dark:bg-[#111114]"},sn={class:"flex-1 overflow-hidden"},an={key:1},ln={class:"sticky bottom-0 left-0 flex justify-center"},rn={style:{"padding-right":"0.5",height:"auto"},class:"waibk1"},cn={class:"flex items-center justify-between",style:{}},un={style:{width:"80px",border:"1px solid rgba(116, 116, 116, 0.268)","border-radius":"5px"}},dn={class:"flex justify-between items-center hover:bg-[#eef0f3] dark:hover:bg-[#33373c]",style:{border:"1px solid rgba(116, 116, 116, 0.268)","padding-top":"5px","padding-bottom":"5px","padding-right":"5px","border-radius":"5px"}},pn={class:"flex items-center text-neutral-400 cursor-pointer hover:text-[#846EF7]"},hn={class:"flex space-x-2",style:{display:"none"}},fn={class:"flex justify-between items-center"},gn={class:"flex items-center text-neutral-400 cursor-pointer hover:text-[#846EF7] hover:bg-[#eef0f3] dark:hover:bg-[#33373c]",style:{border:"1px solid #6767673d","border-radius":"3px",height:"2rem"}},mn=t("div",{class:"mx-4 h-full text-neutral-300 dark:text-neutral-600",style:{"margin-left":"0px"}},null,-1),vn={class:"w-0 h-0 opacity-0"},xn={class:"flex items-stretch space-x-2"},yn={class:"relative flex-1"},bn={class:"flex w-full flex-col mb-1"},wn=t("span",{class:"text-neutral-400 mb-1"},"提示词：",-1),_n={class:"absolute bottom-1 left-2 right-2",style:{width:"50px","margin-left":"auto"}},kn={class:"flex items-center justify-between",style:{"margin-left":"auto"}},Cn={class:"flex justify-between items-center",style:{"margin-left":"auto"}},In={class:"dark:text-black",style:{"font-size":"30px"}},Tn={key:0,class:"w-full flex justify-center items-center py-2 text-xs text-[#aeaeae]"},$n={class:"ml-2 transition-all text-[#aeaeae] hover:text-[#60606d]",href:"https://beian.miit.gov.cn",target:"_blank"},Sn=de({__name:"chatBase",setup(o){const{proxy:u,ctx:i}=et(),{imgs:h,imgsys:c,triggerUpload:w,handleImageUpload:v,deleteImage:I}=on(),_=rt(),g=$e(),T=dt();let B=new AbortController;const k=Jt(),R=Se(),W=tt(),H=b(),x=pe(),G=b(!1),ee=b(!0),F=b(null),se=b(""),ae=b(null),l=b(!1),r=f(()=>g.globalConfig),O=f(()=>{var n,a;return((n=r.value)==null?void 0:n.companyName)&&((a=r.value)==null?void 0:a.filingNumber)}),{addGroupChat:V,updateGroupChat:M,updateGroupChatSome:le}=So(),J=f(()=>T.query.trade_status),N=f(()=>T.query.token);$o();const L=f(()=>g.isLogin),{isMobile:P}=ye(),{scrollRef:ht,scrollToBottom:Be,scrollToBottomIfAtBottom:qe}=To(),{usingContext:Re,toggleUsingContext:Ae}=Bo(),{usingduomo:be,toggleUsingDuomo:Ue}=Ao();be.value=!1,Te(()=>{x.clearChatByGroupId(),Ue(),Ae()}),Qe(()=>{x.clearChatByGroupId()});let ft=at("imgsqj");const gt=at("updateimgsqj");xe(be,n=>{u.$usingduomoqj.value=n});const{usingNetwork:he,toggleUsingNetwork:Ne}=Ro(),E=b(f(()=>x.chatList)),mt=f(()=>E.value.filter(n=>!n.inversion&&!n.error)),ot=f(()=>{var a;const n=mt.value.filter(D=>{var Q;return(Q=D.conversationOptions)==null?void 0:Q.parentMessageId});return(a=n[n.length-1])==null?void 0:a.conversationOptions}),ie=b(""),K=b(!1),re=b(null),Pe=b(!0),Ge=b(null),ce=b(""),fe=b(null),Fe=f(()=>x.active),ge=f(()=>x.groupList.find(n=>n.uuid===x.active)),Le=f(()=>Number(x==null?void 0:x.activeModelKeyType)),Oe=f(()=>ge!=null&&ge.value?ge.value.appId:0),vt=f(()=>_.clipboardText);xe(vt,n=>{var a;ie.value=n,(a=re.value)==null||a.focus(),re.value.scrollTop=re.value.scrollHeight}),xe(Oe,n=>{n?bt(n):F.value=null},{immediate:!0}),xe(Fe,n=>{var a;n&&(Pe.value=!0),re.value&&!P.value&&((a=re.value)==null||a.focus())},{immediate:!0}),xe(E,n=>{n.length!==0&&Pe.value&&(Pe.value=!1,Be())},{immediate:!0}),xe(be,(n,a)=>{n||(h.value=[],c.value=[])});function xt(){l.value=!0}function yt(n){ce.value=n,fe.value="auto",l.value=!1,_e(()=>nt())}async function bt(n){const a=await Kt({id:n});F.value=a.data}function wt(n){ie.value=n,Ce()}function _t(){H.value.scrollIntoView({behavior:"smooth"})}async function Ce(n){if(x.groupList.length===0||K.value||!ee.value)return;let a="";if(n&&typeof n=="number"){const{requestOptions:D}=E.value[n];a=(D==null?void 0:D.prompt)??""}kt(a)}async function kt(n){let a=n||ie.value;if(ce.value&&!a.includes(ce.value)&&(a=`${ce.value}
${a}`),K.value||!a||a.trim()==="")return;B=new AbortController,V({dateTime:new Date().toLocaleString(),text:a,inversion:!0,error:!1,conversationOptions:null,requestOptions:{prompt:a,options:null}}),Be(),K.value=!0,ie.value="";let D={groupId:+Fe.value,usingNetwork:he.value,usingduomo:be.value};ot.value&&Re.value&&!he.value&&(D={...ot.value,...D}),V({dateTime:new Date().toLocaleString(),text:"AI思考中",loading:!0,inversion:!1,error:!1,conversationOptions:null,requestOptions:{prompt:a,options:{...D}}}),Be();const Q=null;let y="",s=null;G.value=!0;let we={};_.updateIsChatIn(!0);try{await(async()=>{let z=0,te=!0,me="";async function He(){var Ee,De;if(te){y&&y[z]&&(ee.value=!1,y.length-z>150?(me+=y.substring(z,z+10),z+=10):y.length-z>200?(me+=y.substring(z),z+=y.length-z):(me+=y[z],z++),M(E.value.length-1,{dateTime:new Date().toLocaleString(),text:me,inversion:!1,usage:(Ee=s==null?void 0:s.detail)==null?void 0:Ee.usage,error:!1,loading:!0,conversationOptions:{conversationId:s==null?void 0:s.conversationId,parentMessageId:s==null?void 0:s.id},requestOptions:{prompt:a,options:{...D}}}),qe());const ve=me?me.length:0,oe=y?y.length:0;if(!G.value&&ve===oe){if(ee.value=!0,le(E.value.length-1,{loading:!1,conversationOptions:{conversationId:s==null?void 0:s.conversationId,parentMessageId:s==null?void 0:s.id},requestOptions:{prompt:a,options:{...D}}}),_.updateIsChatIn(!1),Object.keys(we).length&&g.updateUserBanance(we),E.value.length===2&&!((De=ge==null?void 0:ge.value)!=null&&De.appId)){const Z=E.value[1].text.length>15?E.value[1].text.slice(0,15):E.value[1].text;x.updateGroupInfo({groupId:+Fe.value,title:Z}).then(()=>{x.queryMyGroup()})}te=!1}y&&y.length&&y.length>me.length?requestAnimationFrame(He):setTimeout(()=>{requestAnimationFrame(He)},1e3)}}requestAnimationFrame(He),gt(h.value);let Mt=JSON.stringify(ft.value);await Wt({imgsup:Mt,prompt:a,appId:66,options:D,signal:B.signal,onDownloadProgress:({event:Ee})=>{const De=Ee.target,{responseText:ve}=De;if([1].includes(Le.value)){const oe=ve.lastIndexOf(`
`,ve.length-2);let Z=ve;oe!==-1&&(Z=ve.substring(oe));try{s=JSON.parse(Z)}catch{console.log("parse data erro from openai: "),Z.includes("OpenAI timed out waiting for response")&&R.warning("会话超时了、告知管理员吧~~~")}}if([2,3].includes(Le.value)){const oe=ve.toString().split(`
`).filter(Ve=>Ve.trim()!=="");let Z="",je={};for(const Ve of oe)try{const Je=JSON.parse(Ve);Z+=Je.result,je=Je}catch{console.log("Json parse 2 3 type error: ")}je.result=Z,s=je}try{if(Le.value===1&&(y=s.text,s!=null&&s.userBanance&&(we=s==null?void 0:s.userBanance)),[2,3].includes(Le.value)){const{result:oe,is_end:Z}=s;y=oe,G.value=!Z,s!=null&&s.userBanance&&(we=s==null?void 0:s.userBanance)}}catch{}}})})()}catch(j){_.updateIsChatIn(!1),clearInterval(Q),G.value=!1,(j.code===402||j!=null&&j.message.includes("余额不足")||j!=null&&j.message.includes("免费额度已经使用完毕"))&&(L.value?_.updateGoodsDialog(!0):g.setLoginDialog(!0));let z=(j==null?void 0:j.message)??S("common.wrong");if(z==="Request failed with status code 401"&&(z="非法操作、请先登录后再进行问答使用！"),j!=null&&j.message.includes("canceled")){le(E.value.length-1,{loading:!1}),qe(),setTimeout(()=>{g.getUserBalance()},200);return}const te=E.value[E.value.length-1];if(te!=null&&te.text&&te.text!==""){le(E.value.length-1,{text:`${te.text==="AI思考中"?"":te.text}
[${z}]`,error:!1,loading:!1});return}M(E.value.length-1,{dateTime:new Date().toLocaleString(),text:z,inversion:!1,error:!0,loading:!1,conversationOptions:null,requestOptions:{prompt:a,options:{...D}}}),qe()}finally{K.value=!1,G.value=!1}await x.queryActiveChatLogList()}async function Ct(n){g.setToken(n),it.replace({name:"Chat",query:{}}),R.success("账户登录成功、开始体验吧！"),g.getUserInfo()}function It(){J.value.toLowerCase().includes("success")?(R.success("感谢你的购买、祝您使用愉快~",{duration:5e3}),g.getUserInfo(),it.replace({name:"Chat",query:{}})):R.error("您还没有购买成功哦~")}function Tt(){if(K.value)return;const n=k.warning({title:S("chat.exportImage"),content:S("chat.exportImageConfirm"),positiveText:S("common.yes"),negativeText:S("common.no"),onPositiveClick:async()=>{try{n.loading=!0;const a=document.getElementById("image-wrapper"),Q=(await Ot(a,{useCORS:!0})).toDataURL("image/png"),y=document.createElement("a");y.style.display="none",y.href=Q,y.setAttribute("download","chat-shot.png"),typeof y.download>"u"&&y.setAttribute("target","_blank"),document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(Q),n.loading=!1,R.success(S("chat.exportSuccess")),Promise.resolve()}catch{R.error(S("chat.exportFailed"))}finally{n.loading=!1}}})}function $t({chatId:n}){K.value||k.warning({title:S("chat.deleteMessage"),content:S("chat.deleteMessageConfirm"),positiveText:S("common.yes"),negativeText:S("common.no"),onPositiveClick:()=>{x.deleteChatById(n)}})}async function St({chatId:n},a){await x.yuyinById(n),u.$loadings.value=!u.$loadings.value}function Bt(){K.value||k.warning({title:S("chat.clearChat"),content:S("chat.clearChatConfirm"),positiveText:S("common.yes"),negativeText:S("common.no"),onPositiveClick:async()=>{await x.clearChatByGroupId(),R.success("删除当前页面对话完成")}})}function Rt(n){P.value?n.key==="Enter"&&n.ctrlKey&&(n.preventDefault(),Ce()):n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),Ce())}function At(){K.value&&(B.abort(),K.value=!1,G.value=!1,ee.value=!0)}const Lt=f(()=>P.value?S("chat.placeholderMobile"):S("chat.placeholder")),Et=f(()=>K.value||!ie.value||ie.value.trim()===""||!ee.value);function nt(){var n;Ge.value&&(fe.value=`${(n=Ge.value.getBoundingClientRect())==null?void 0:n.height}px`)}function Dt(){fe.value="auto",ce.value||(fe.value=0),_e(()=>nt())}Te(async()=>{x.queryChatPre(),N.value&&Ct(N.value),J.value&&It(),_e(async()=>{var n;await x.queryActiveChatLogList(),Be(),re.value&&!P.value&&((n=re.value)==null||n.focus())})});const jt=f(()=>W.theme==="dark");return Qe(()=>{K.value&&B.abort()}),console.log("activeAppId",Oe),(n,a)=>{var D,Q,y;return d(),C("div",nn,[p(Ho,{"using-context":e(Re),"dark-mode":e(jt),onExport:Tt,onToggleUsingContext:e(Ae),onClear:Bt,onScrollBtn:_t},null,8,["using-context","dark-mode","onToggleUsingContext"]),t("main",sn,[t("div",{id:"scrollRef",ref_key:"scrollRef",ref:ht,class:"relative h-full overflow-hidden overflow-y-auto scroll-smooth"},[t("div",{id:"image-wrapper",class:A(["w-full max-w-screen-4xl m-auto dark:bg-[#101014] h-full",[e(P)?"p-2":"p-4"]])},[!E.value.length&&!e(Oe)?(d(),C("div",{key:0,class:A(["flex justify-center items-center text-center",[e(P)?"h-full":"h-4/5 "]])},[p(tn,{onPrompt:wt})],2)):U("",!0),E.value.length?(d(),C("div",an,[(d(!0),C(Ie,null,ze(E.value,(s,we)=>(d(),Y(e(Co),{key:s.chatId,"date-time":s.dateTime,text:s.text,inversion:s.inversion,error:s.error,loading:s.loading,loadingbf:s.loadingbf,onRegenerate:j=>Ce(we),onDelete:j=>$t(s),onYuyin:j=>St(s)},null,8,["date-time","text","inversion","error","loading","loadingbf","onRegenerate","onDelete","onYuyin"]))),128)),t("div",ln,[K.value?(d(),Y(e(ue),{key:0,onClick:At},{icon:m(()=>[p(e(q),{icon:"ri:stop-circle-line"})]),default:m(()=>[X(" 停止输出 ")]),_:1})):U("",!0)]),t("div",{ref_key:"bottomContainer",ref:H,class:"bottom"},null,512)])):U("",!0)],2)],512)]),t("footer",null,[t("div",rn,[t("div",cn,[t("div",un,[t("div",{class:"flex items-center w-[160px] p-1 mb-1 text-[#846EF7] rounded cursor-pointer transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]",onClick:a[0]||(a[0]=s=>e(_).updateGoodsDialog(!0)),style:{width:"100%","font-size":"0.75rem","margin-bottom":"0rem"}},[p(e(q),{icon:"material-symbols:shopping-bag-outline",class:"mr-1 text-base"}),X(" 订阅会员 ")])]),t("div",dn,[t("div",pn,[t("span",{class:A(["ml-2 mr-2 text-xs",[{"text-[#846EF7]":e(be),"":!e(be)}]]),onClick:a[1]||(a[1]=(...s)=>e(Ue)&&e(Ue)(...s)),style:{"margin-bottom":"0rem"}},"注意：需要使用4.0",2)])]),t("div",hn,[p(e(ke),{trigger:"hover",placement:"bottom-end",disabled:e(P)},{trigger:m(()=>[t("button",{class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]",onClick:a[2]||(a[2]=(...s)=>e(Ae)&&e(Ae)(...s)),style:{width:"50px",border:"1px #73737326 solid"}},[t("span",{class:A(["",{"text-[#846EF7]":e(Re),"text-[#9d9c9c]":!e(Re)}])},[p(e(q),{class:"text-lg",style:{width:"1em",height:"1em"},icon:"ri:chat-history-line"})],2)])]),default:m(()=>[X(" 上下文状态 ")]),_:1},8,["disabled"])]),t("div",fn,[t("div",gn,[t("span",{class:A(["ml-2 mr-2 text-xs",[{"text-[#846EF7]":e(he),"":!e(he)}]]),onClick:a[3]||(a[3]=(...s)=>e(Ne)&&e(Ne)(...s))},"联网",2),p(e(ke),{trigger:"hover",disabled:e(P)},{trigger:m(()=>[p(e(q),{icon:"zondicons:network",class:A(["cursor-pointer mb-0.5",[{"text-[#846EF7]":e(he),"":!e(he)}]]),onClick:e(Ne)},null,8,["class","onClick"])]),default:m(()=>[X(" "+ne(e(he)?"关闭联网模式":"开启联网模式"),1)]),_:1},8,["disabled"]),mn])])])]),t("div",{class:A([[e(P)?"px-2":"px-4"],"flex space-x-2"])},[(D=e(x).chatPreList)!=null&&D.length?(d(),Y(e(ct),{key:0,placement:"top-start",style:{width:"200px"},raw:"","show-arrow":!1},{trigger:m(()=>[p(e(ke),{trigger:"hover",placement:"bottom-end",disabled:e(P)},{trigger:m(()=>[t("button",{class:"flex h-8 w-8 items-center justify-center rounded border transition hover:bg-[#eef0f3] dark:border-neutral-700 dark:hover:bg-[#33373c]",onClick:xt},[t("span",null,[p(e(q),{class:"text-lg",style:{width:"1em",height:"1em"},icon:"ic:outline-tips-and-updates"})])])]),default:m(()=>[X(" 学术快问 ")]),_:1},8,["disabled"])]),default:m(()=>[t("div",vn,[p(e(Yt),{id:"chatPreRef",ref_key:"chatPreRef",ref:ae,modelValue:se.value,"onUpdate:modelValue":a[4]||(a[4]=s=>se.value=s),show:l.value,placement:"top",class:"w-0 h-0 opacity-0 overflow-hidden",placeholder:"请选用当前聊天组所需的模型！","expand-trigger":"click",options:e(x).chatPreList,"check-strategy":"child","on-update:value":yt},null,8,["modelValue","show","options"])])]),_:1})):U("",!0)],2),t("div",{class:A(["m-auto max-w-screen-4xl",[e(P)?"px-2 py-1":"px-4 py-2"]]),style:{"padding-top":"0rem"}},[t("div",xn,[t("div",yn,[p(e(lt),{ref_key:"inputRef",ref:re,value:ie.value,"onUpdate:value":a[5]||(a[5]=s=>ie.value=s),type:"textarea",clearable:"",style:Ze([{paddingTop:fe.value},{"padding-right":"30px"}]),class:"pb-10",autofocus:"",placeholder:e(Lt),autosize:{minRows:e(P)?1:2,maxRows:(e(P),8)},onKeypress:Rt},null,8,["value","style","placeholder","autosize"]),ce.value?(d(),C("div",{key:0,ref_key:"tipsRef",ref:Ge,class:"absolute h-auto top-0 w-full px-3 pt-1 flex justify-between",style:Ze(fe.value&&{height:fe.value})},[t("div",bn,[wn,p(e(lt),{value:ce.value,"onUpdate:value":a[6]||(a[6]=s=>ce.value=s),class:"border-none",type:"textarea",clearable:"",autosize:{minRows:1},"on-input":Dt},null,8,["value"])])],4)):U("",!0),t("div",_n,[t("div",kn,[t("div",Cn,[p(e(ue),{type:"primary",size:"small",style:{padding:"0px",width:"50px",height:"50px",border:"0px","margin-left":"auto"},disabled:e(Et),round:"",onClick:Ce},{icon:m(()=>[t("span",In,[p(e(q),{icon:"icon-park-outline:send"})])]),_:1},8,["disabled"])])])])])])],2)]),e(O)&&!e(P)?(d(),C("div",Tn,[X(" 版权所有 © "+ne((Q=e(r))==null?void 0:Q.companyName)+" ",1),t("a",$n,ne((y=e(r))==null?void 0:y.filingNumber),1)])):U("",!0)])}}});const Bn={class:"w-full h-full flex justify-center items-center flex-col"},Rn=Xt('<svg xmlns="http://www.w3.org/2000/svg" color="#846EF7" width="10em" height="10em" viewBox="0 0 48 48"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="4"><path stroke-linejoin="round" d="M25 41h13v-7M25 7h13v7M25 34.243V44l-15-5.381V34m15-20.027V4L10 9.381v4.592"></path><rect width="40" height="20" x="4" y="14" stroke-linejoin="round" rx="2"></rect><path d="M10 19v10m11-10v10"></path><path stroke-linejoin="round" d="M35 20v8m-3-8h6m-28-1h3a3 3 0 0 1 3 3v0a3 3 0 0 1-3 3h-3m11-6h3a3 3 0 0 1 3 3v0a3 3 0 0 1-3 3h-3"></path></g></svg><h1 class="mb-4 text-2xl font-bold mt-1">PPT生成</h1><p class="mb-6 text-base text-slate-500" style="width:70%;"> 提示：直接发送要求，生成满意的ppt内容后，点击对话下的【一键生成】按钮即可生成美观的ppt文件并下载。 </p>',3),An=de({__name:"index",setup(o){const u=pe(),i=b(!1);async function h(){i.value=!0;try{await u.addNewChatGroup(),await u.queryMyGroup(),i.value=!1}catch{i.value=!1}}return(c,w)=>(d(),C("div",Bn,[Rn,p(e(ue),{type:"primary",loading:i.value,onClick:h,style:{"--n-color":"#846ef7"}},{default:m(()=>[X("开始对话")]),_:1},8,["loading"])]))}}),Ln={class:"h-full dark:bg-[#24272e] transition-all"},En={class:"w-full flex-1"},qn=de({__name:"ppt",setup(o){const u=dt(),i=ut(),h=tt(),c=pe(),w=$e(),{isMobile:v}=ye(),I=f(()=>w.isLogin),_=f(()=>h.siderCollapsed),g=f(()=>c.groupList),T=f(()=>u.query.appId);xe(I,async(W,H)=>{W&&!H&&await c.queryMyGroup()});const B=f(()=>v.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]),k=f(()=>["h-full",{"pl-[0px]":!v.value&&!_.value}]);async function R(W){const H=+W;i.replace({name:"Chat",query:{}});const x=c.groupList.find(G=>G.appId===H);x?await c.setActiveGroup(x.uuid):(await c.addNewChatGroup(H),await c.queryMyGroup())}return Te(()=>{T.value&&R(T.value)}),(W,H)=>(d(),C("div",Ln,[t("div",{class:A(["h-full overflow-hidden",e(B)])},[p(e(Qt),{class:A(["z-40 transition",e(k)]),"has-sider":""},{default:m(()=>[t("div",En,[e(g).length?(d(),Y(Sn,{key:0})):U("",!0),e(g).length?U("",!0):(d(),Y(An,{key:1}))])]),_:1},8,["class"])],2)]))}});export{qn as default};
