'use strict';const _0x382b1c=_0x154c;(function(_0x1b7f82,_0x5157d1){const _0x528d99=_0x154c,_0x4c978d=_0x1b7f82();while(!![]){try{const _0x28f067=parseInt(_0x528d99(0x226))/0x1*(parseInt(_0x528d99(0x203))/0x2)+parseInt(_0x528d99(0x21e))/0x3+parseInt(_0x528d99(0x1dd))/0x4+-parseInt(_0x528d99(0x1ec))/0x5+parseInt(_0x528d99(0x1fd))/0x6+-parseInt(_0x528d99(0x202))/0x7+parseInt(_0x528d99(0x22e))/0x8;if(_0x28f067===_0x5157d1)break;else _0x4c978d['push'](_0x4c978d['shift']());}catch(_0x15eca0){_0x4c978d['push'](_0x4c978d['shift']());}}}(_0x4453,0xbd9ac));function _0x4453(){const _0x490be4=['184wmKykn','./dto/recDrawImg.dto','send','design:type','导出问答记录','maintainCacheSize','design:returntype','查询所有的问答记录','6403272WDTxXr','design:paramtypes','metadata','ChatLogController','next','Query','./dto/del.dto','1777208eOAysQ','Get','Body','Req','推荐此图片对外展示','查询所有的绘制记录','QuerMyChatLogDto','user','JwtAuthGuard','DelByGroupDto','DelDto','缓存中没有数据，进行API请求','缓存中有数据，则直接返回缓存的响应','__metadata','exportExcel','6956130oGmJKt','byAppId','decorate','chatLogService','ChatLogService','查询某个应用的问答记录','清空一组对话','object','./dto/queryAllChatLog.dto','cache','function','./dto/queryMyChatLog.dto','@nestjs/swagger','length','ApiBearerAuth','delete','ChatListDto','1639020OankAv','recDrawImg','@nestjs/common','../../common/auth/jwtAuth.guard','log','6596359plvuQs','5126MJdpCy','Post','maxCacheSize','defineProperty','./dto/queryByAppId.dto','删除我的问答记录','UseGuards','QuerAllChatLogDto','querAllDrawLog','ApiOperation','Res','size','Controller','yuyinChatLog','value','ApiTags','./dto/chatList.dto','chatAll','AdminAuthGuard','queryAllChatLog','chatList','getOwnPropertyDescriptor','prototype','querDrawLog','./dto/queryAllDrawLog.dto','yuyin','draw','3362130MkmnVY','./dto/exportExcelChatlog.dto','drawAll','SuperAuthGuard','recDrawImgDto','set','del','delByGroupId'];_0x4453=function(){return _0x490be4;};return _0x4453();}function _0x154c(_0x3caa1c,_0x5336c3){const _0x4453e7=_0x4453();return _0x154c=function(_0x154cda,_0x43b007){_0x154cda=_0x154cda-0x1d7;let _0x289754=_0x4453e7[_0x154cda];return _0x289754;},_0x154c(_0x3caa1c,_0x5336c3);}var __decorate=this&&this['__decorate']||function(_0x5e411b,_0x3d09ac,_0x24aa09,_0x47dcd9){const _0x4f1bfd=_0x154c;var _0x28341d=arguments[_0x4f1bfd(0x1f9)],_0x2a71bf=_0x28341d<0x3?_0x3d09ac:_0x47dcd9===null?_0x47dcd9=Object[_0x4f1bfd(0x218)](_0x3d09ac,_0x24aa09):_0x47dcd9,_0x3e4058;if(typeof Reflect===_0x4f1bfd(0x1f3)&&typeof Reflect[_0x4f1bfd(0x1ee)]===_0x4f1bfd(0x1f6))_0x2a71bf=Reflect[_0x4f1bfd(0x1ee)](_0x5e411b,_0x3d09ac,_0x24aa09,_0x47dcd9);else{for(var _0x3031e7=_0x5e411b['length']-0x1;_0x3031e7>=0x0;_0x3031e7--)if(_0x3e4058=_0x5e411b[_0x3031e7])_0x2a71bf=(_0x28341d<0x3?_0x3e4058(_0x2a71bf):_0x28341d>0x3?_0x3e4058(_0x3d09ac,_0x24aa09,_0x2a71bf):_0x3e4058(_0x3d09ac,_0x24aa09))||_0x2a71bf;}return _0x28341d>0x3&&_0x2a71bf&&Object[_0x4f1bfd(0x206)](_0x3d09ac,_0x24aa09,_0x2a71bf),_0x2a71bf;},__metadata=this&&this[_0x382b1c(0x1ea)]||function(_0x2da7ab,_0x1a51ca){const _0x26f9be=_0x382b1c;if(typeof Reflect===_0x26f9be(0x1f3)&&typeof Reflect[_0x26f9be(0x1d8)]===_0x26f9be(0x1f6))return Reflect[_0x26f9be(0x1d8)](_0x2da7ab,_0x1a51ca);},__param=this&&this['__param']||function(_0x290154,_0x4a13c9){return function(_0x5204e9,_0x235726){_0x4a13c9(_0x5204e9,_0x235726,_0x290154);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x382b1c(0x1d9)]=void 0x0;const common_1=require(_0x382b1c(0x1ff)),swagger_1=require(_0x382b1c(0x1f8)),jwtAuth_guard_1=require(_0x382b1c(0x200)),chatLog_service_1=require('./chatLog.service'),queryAllDrawLog_dto_1=require(_0x382b1c(0x21b)),queryAllChatLog_dto_1=require(_0x382b1c(0x1f4)),recDrawImg_dto_1=require(_0x382b1c(0x227)),superAuth_guard_1=require('../../common/auth/superAuth.guard'),adminAuth_guard_1=require('../../common/auth/adminAuth.guard'),queryMyChatLog_dto_1=require(_0x382b1c(0x1f7)),exportExcelChatlog_dto_1=require(_0x382b1c(0x21f)),chatList_dto_1=require(_0x382b1c(0x213)),del_dto_1=require(_0x382b1c(0x1dc)),delByGroup_dto_1=require('./dto/delByGroup.dto'),queryByAppId_dto_1=require(_0x382b1c(0x207));let ChatLogController=class ChatLogController{constructor(_0xf376b9){const _0xd04896=_0x382b1c;this['chatLogService']=_0xf376b9,this['cache']=new Map(),this[_0xd04896(0x205)]=0x1f4;}['querDrawLog'](_0x23e4d0,_0x12d110){const _0x26190b=_0x382b1c;return this['chatLogService'][_0x26190b(0x21a)](_0x12d110,_0x23e4d0);}[_0x382b1c(0x1fe)](_0x5e531f){const _0x1d196c=_0x382b1c;return this[_0x1d196c(0x1ef)][_0x1d196c(0x1fe)](_0x5e531f);}[_0x382b1c(0x20b)](_0x159345){const _0x2476ca=_0x382b1c;return this[_0x2476ca(0x1ef)][_0x2476ca(0x20b)](_0x159345);}[_0x382b1c(0x216)](_0x23cdec,_0x53dca8){return this['chatLogService']['querAllChatLog'](_0x23cdec,_0x53dca8);}['exportExcel'](_0x2d68a5,_0xb84f70){return this['chatLogService']['exportExcel'](_0x2d68a5,_0xb84f70);}[_0x382b1c(0x217)](_0x184bf5,_0x4be04d){const _0x31ab73=_0x382b1c;return this[_0x31ab73(0x1ef)][_0x31ab73(0x217)](_0x184bf5,_0x4be04d);}['del'](_0x4008f8,_0x213acb){const _0x28af13=_0x382b1c;return this[_0x28af13(0x1ef)]['deleteChatLog'](_0x4008f8,_0x213acb);}[_0x382b1c(0x22b)](){const _0x349018=_0x382b1c;while(this[_0x349018(0x1f5)][_0x349018(0x20e)]>this[_0x349018(0x205)]){const _0x46c493=this[_0x349018(0x1f5)]['keys']()[_0x349018(0x1da)]()[_0x349018(0x211)];this['cache'][_0x349018(0x1fb)](_0x46c493);}}async[_0x382b1c(0x21c)](_0x1076fc,_0x47a604,_0x197cdb){const _0x31ebe=_0x382b1c,_0x30b80b=_0x1076fc[_0x31ebe(0x1e4)]['id']+'-'+_0x197cdb;if(this[_0x31ebe(0x1f5)]['has'](_0x30b80b)){console[_0x31ebe(0x201)](_0x31ebe(0x1e9)),_0x47a604[_0x31ebe(0x228)](this[_0x31ebe(0x1f5)]['get'](_0x30b80b));return;}console[_0x31ebe(0x201)](_0x31ebe(0x1e8));const _0x4037d2=await this[_0x31ebe(0x1ef)][_0x31ebe(0x210)](_0x1076fc,_0x197cdb);console['log']('将响应存储到缓存中'),this['cache'][_0x31ebe(0x223)](_0x30b80b,_0x4037d2),console[_0x31ebe(0x201)]('发送响应'),_0x47a604[_0x31ebe(0x228)](_0x4037d2),this[_0x31ebe(0x22b)]();}['delByGroupId'](_0x13e3fe,_0x17c135){const _0x489549=_0x382b1c;return this[_0x489549(0x1ef)]['delByGroupId'](_0x13e3fe,_0x17c135);}[_0x382b1c(0x1ed)](_0x2f42a3,_0x38cbff){const _0x112d3d=_0x382b1c;return this[_0x112d3d(0x1ef)][_0x112d3d(0x1ed)](_0x2f42a3,_0x38cbff);}};__decorate([(0x0,common_1[_0x382b1c(0x1de)])(_0x382b1c(0x21d)),(0x0,swagger_1[_0x382b1c(0x20c)])({'summary':'查询我的绘制记录'}),(0x0,swagger_1[_0x382b1c(0x1fa)])(),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x382b1c(0x1e5)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1db)])()),__param(0x1,(0x0,common_1[_0x382b1c(0x1e0)])()),__metadata(_0x382b1c(0x229),Function),__metadata('design:paramtypes',[queryMyChatLog_dto_1[_0x382b1c(0x1e3)],Object]),__metadata(_0x382b1c(0x22c),void 0x0)],ChatLogController['prototype'],_0x382b1c(0x21a),null),__decorate([(0x0,common_1['Post'])(_0x382b1c(0x1fe)),(0x0,swagger_1['ApiOperation'])({'summary':_0x382b1c(0x1e1)}),(0x0,swagger_1[_0x382b1c(0x1fa)])(),(0x0,common_1['UseGuards'])(superAuth_guard_1[_0x382b1c(0x221)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1df)])()),__metadata(_0x382b1c(0x229),Function),__metadata(_0x382b1c(0x1d7),[recDrawImg_dto_1[_0x382b1c(0x222)]]),__metadata(_0x382b1c(0x22c),void 0x0)],ChatLogController['prototype'],'recDrawImg',null),__decorate([(0x0,common_1['Get'])(_0x382b1c(0x220)),(0x0,swagger_1[_0x382b1c(0x20c)])({'summary':_0x382b1c(0x1e2)}),__param(0x0,(0x0,common_1[_0x382b1c(0x1db)])()),__metadata(_0x382b1c(0x229),Function),__metadata(_0x382b1c(0x1d7),[queryAllDrawLog_dto_1['QuerAllDrawLogDto']]),__metadata('design:returntype',void 0x0)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x20b),null),__decorate([(0x0,common_1['Get'])(_0x382b1c(0x214)),(0x0,swagger_1['ApiOperation'])({'summary':_0x382b1c(0x22d)}),(0x0,swagger_1[_0x382b1c(0x1fa)])(),(0x0,common_1[_0x382b1c(0x209)])(adminAuth_guard_1[_0x382b1c(0x215)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1db)])()),__param(0x1,(0x0,common_1[_0x382b1c(0x1e0)])()),__metadata('design:type',Function),__metadata(_0x382b1c(0x1d7),[queryAllChatLog_dto_1[_0x382b1c(0x20a)],Object]),__metadata('design:returntype',void 0x0)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x216),null),__decorate([(0x0,common_1[_0x382b1c(0x204)])('exportExcel'),(0x0,swagger_1['ApiOperation'])({'summary':_0x382b1c(0x22a)}),(0x0,swagger_1[_0x382b1c(0x1fa)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x382b1c(0x20d)])()),__metadata(_0x382b1c(0x229),Function),__metadata(_0x382b1c(0x1d7),[exportExcelChatlog_dto_1['ExportExcelChatlogDto'],Object]),__metadata(_0x382b1c(0x22c),void 0x0)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x1eb),null),__decorate([(0x0,common_1['Get'])(_0x382b1c(0x217)),(0x0,swagger_1[_0x382b1c(0x20c)])({'summary':'查询我的问答记录'}),(0x0,swagger_1['ApiBearerAuth'])(),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x382b1c(0x1e5)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1e0)])()),__param(0x1,(0x0,common_1[_0x382b1c(0x1db)])()),__metadata(_0x382b1c(0x229),Function),__metadata(_0x382b1c(0x1d7),[Object,chatList_dto_1[_0x382b1c(0x1fc)]]),__metadata(_0x382b1c(0x22c),void 0x0)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x217),null),__decorate([(0x0,common_1[_0x382b1c(0x204)])(_0x382b1c(0x224)),(0x0,swagger_1[_0x382b1c(0x20c)])({'summary':_0x382b1c(0x208)}),(0x0,swagger_1[_0x382b1c(0x1fa)])(),(0x0,common_1[_0x382b1c(0x209)])(jwtAuth_guard_1[_0x382b1c(0x1e5)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1e0)])()),__param(0x1,(0x0,common_1[_0x382b1c(0x1df)])()),__metadata('design:type',Function),__metadata(_0x382b1c(0x1d7),[Object,del_dto_1[_0x382b1c(0x1e7)]]),__metadata('design:returntype',void 0x0)],ChatLogController[_0x382b1c(0x219)],'del',null),__decorate([(0x0,common_1['Get'])('yuyin'),(0x0,swagger_1[_0x382b1c(0x1fa)])(),(0x0,common_1[_0x382b1c(0x209)])(jwtAuth_guard_1[_0x382b1c(0x1e5)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1e0)])()),__param(0x1,(0x0,common_1['Res'])()),__param(0x2,(0x0,common_1['Query'])('id')),__metadata(_0x382b1c(0x229),Function),__metadata(_0x382b1c(0x1d7),[Object,Object,Number]),__metadata(_0x382b1c(0x22c),Promise)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x21c),null),__decorate([(0x0,common_1['Post'])('delByGroupId'),(0x0,swagger_1[_0x382b1c(0x20c)])({'summary':_0x382b1c(0x1f2)}),(0x0,swagger_1[_0x382b1c(0x1fa)])(),(0x0,common_1[_0x382b1c(0x209)])(jwtAuth_guard_1[_0x382b1c(0x1e5)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1e0)])()),__param(0x1,(0x0,common_1[_0x382b1c(0x1df)])()),__metadata('design:type',Function),__metadata(_0x382b1c(0x1d7),[Object,delByGroup_dto_1[_0x382b1c(0x1e6)]]),__metadata(_0x382b1c(0x22c),void 0x0)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x225),null),__decorate([(0x0,common_1['Get'])(_0x382b1c(0x1ed)),(0x0,swagger_1[_0x382b1c(0x20c)])({'summary':_0x382b1c(0x1f1)}),(0x0,swagger_1['ApiBearerAuth'])(),(0x0,common_1[_0x382b1c(0x209)])(jwtAuth_guard_1[_0x382b1c(0x1e5)]),__param(0x0,(0x0,common_1[_0x382b1c(0x1e0)])()),__param(0x1,(0x0,common_1[_0x382b1c(0x1db)])()),__metadata(_0x382b1c(0x229),Function),__metadata(_0x382b1c(0x1d7),[Object,queryByAppId_dto_1['QueryByAppIdDto']]),__metadata(_0x382b1c(0x22c),void 0x0)],ChatLogController[_0x382b1c(0x219)],_0x382b1c(0x1ed),null),ChatLogController=__decorate([(0x0,common_1[_0x382b1c(0x20f)])('chatLog'),(0x0,swagger_1[_0x382b1c(0x212)])('ChatLog'),__metadata(_0x382b1c(0x1d7),[chatLog_service_1[_0x382b1c(0x1f0)]])],ChatLogController),exports[_0x382b1c(0x1d9)]=ChatLogController;