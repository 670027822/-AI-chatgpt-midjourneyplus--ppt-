'use strict';function _0x48d9(){const _0xeea062=['上传图片失败[Chevereto][url]','axios','HttpException','uploadFileByCheveretoFromUrl','__esModule','aliOssStatus','https://','getOwnPropertyDescriptor','http://172.247.48.137:8000','uploadFileByAliOss','Injectable','1395192wGWurk','stream','上传图片失败[Chevereto]','object','image','@nestjs/common','put','cosBucket','aliOssBucket','aliOssAccessKeySecret','globalConfigService','不走代理直接上传存储桶失败','cheveretoUploadPath','不走代理直接上传存储桶开始','上传图片失败[ten][url]','上传图片失败[ALI][url]','function','__decorate','https://cdn.discordapp.com/attachments/1097409128491651135/1169910551275638855/snine_60b5c001b_A_young_girl_smiles_brightly_in_the_pure_blue_f_8a41fe5f-5101-4c1e-b948-a748a0583577.png?ex=65571f1b&is=6544aa1b&hm=b82f2d88224eb7942e24c63a8e519c7693de12a2b96daa0f327dfb8f691b1480&','cos\x20->\x20err:\x20','cosSecretId','Chevereto\x20--->\x20res','locationUrl232342','getBufferFromUrl','4NtaLvG','aliyun','mjtest.png','form-data','tencentCosStatus','请先前往后台配置上传图片的方式','log','url','STANDARD','aliOssRegion','chevereto','append','ali\x20开始上传','uploadFileByAliOssFromUrl','上传图片失败[Chevereto|buffer]\x20-->\x20','HttpStatus','proxyMj','1055502ZHkhDz','code','uploadFileByTencentCos','test','ISDEV','4725080wGlaSi','error:\x20','ali','__metadata','source','BAD_REQUEST','buffer22','cos-nodejs-sdk-v5','2656135JQOwZd','mjdev','当前已开启全球加速----------------->','mjp130','上传图片失败[ten]','uploadFileByChevereto','status','design:paramtypes','then','getConfigs','UploadService','cheveretoKey','createRandomUid','ali-oss','mjProxyUrl','0122','toString','slice','res:\x20','uploadFileFromUrl','env','/mj/replaceUpload','cheveretoStatus','tencentCos','endsWith','post','getUploadConfig','图片代理数据','2IHhtNs','removeSpecialCharacters','message','1071060hCezmx','catch','aliOssAccessKeyId','get','error','defineProperty','data','15906321rmScdc','tencent','590403dhKMQE','TODO->error:\x20\x20','获取图片资源失败、请重新试试吧！','tencentCosAcceleratedDomain','GlobalConfigService','default','png','Logger','uploadFileByTencentCosFromUrl','decorate','replace','mjProxy'];_0x48d9=function(){return _0xeea062;};return _0x48d9();}const _0x3e493d=_0xe8cc;(function(_0x5c98d7,_0x3ac4b1){const _0x5dc9cb=_0xe8cc,_0x338f91=_0x5c98d7();while(!![]){try{const _0x14f7ad=parseInt(_0x5dc9cb(0x214))/0x1*(parseInt(_0x5dc9cb(0x208))/0x2)+parseInt(_0x5dc9cb(0x20b))/0x3*(parseInt(_0x5dc9cb(0x1ce))/0x4)+parseInt(_0x5dc9cb(0x1ec))/0x5+parseInt(_0x5dc9cb(0x1b6))/0x6+-parseInt(_0x5dc9cb(0x1df))/0x7+parseInt(_0x5dc9cb(0x1e4))/0x8+-parseInt(_0x5dc9cb(0x212))/0x9;if(_0x14f7ad===_0x3ac4b1)break;else _0x338f91['push'](_0x338f91['shift']());}catch(_0x310d90){_0x338f91['push'](_0x338f91['shift']());}}}(_0x48d9,0x5daae));var __decorate=this&&this[_0x3e493d(0x1c7)]||function(_0x25b3cc,_0x494de6,_0x3d522d,_0x193cd6){const _0x4e7d8d=_0x3e493d;var _0x97c44e=arguments['length'],_0xa89439=_0x97c44e<0x3?_0x494de6:_0x193cd6===null?_0x193cd6=Object[_0x4e7d8d(0x227)](_0x494de6,_0x3d522d):_0x193cd6,_0xd700e1;if(typeof Reflect===_0x4e7d8d(0x1b9)&&typeof Reflect[_0x4e7d8d(0x21d)]===_0x4e7d8d(0x1c6))_0xa89439=Reflect[_0x4e7d8d(0x21d)](_0x25b3cc,_0x494de6,_0x3d522d,_0x193cd6);else{for(var _0x5d4af0=_0x25b3cc['length']-0x1;_0x5d4af0>=0x0;_0x5d4af0--)if(_0xd700e1=_0x25b3cc[_0x5d4af0])_0xa89439=(_0x97c44e<0x3?_0xd700e1(_0xa89439):_0x97c44e>0x3?_0xd700e1(_0x494de6,_0x3d522d,_0xa89439):_0xd700e1(_0x494de6,_0x3d522d))||_0xa89439;}return _0x97c44e>0x3&&_0xa89439&&Object[_0x4e7d8d(0x210)](_0x494de6,_0x3d522d,_0xa89439),_0xa89439;},__metadata=this&&this[_0x3e493d(0x1e7)]||function(_0x2e2146,_0x1523d1){const _0x236103=_0x3e493d;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x236103(0x1c6))return Reflect['metadata'](_0x2e2146,_0x1523d1);};Object['defineProperty'](exports,_0x3e493d(0x224),{'value':!![]}),exports['UploadService']=void 0x0;const common_1=require(_0x3e493d(0x1bb)),TENCENTCOS=require(_0x3e493d(0x1eb)),ALIOSS=require(_0x3e493d(0x1f9)),axios_1=require(_0x3e493d(0x221)),streamToBuffer=require('stream-to-buffer'),utils_1=require('../../common/utils'),globalConfig_service_1=require('../globalConfig/globalConfig.service'),FormData=require(_0x3e493d(0x1d1));function _0xe8cc(_0x51a787,_0xcaa611){const _0x48d921=_0x48d9();return _0xe8cc=function(_0xe8ccf7,_0x291b2d){_0xe8ccf7=_0xe8ccf7-0x1b5;let _0x52c42f=_0x48d921[_0xe8ccf7];return _0x52c42f;},_0xe8cc(_0x51a787,_0xcaa611);}let UploadService=class UploadService{constructor(_0x303b6d){const _0x2e6043=_0x3e493d;this[_0x2e6043(0x1c0)]=_0x303b6d;}['onModuleInit'](){}async['uploadFile'](_0x46c272){const _0x5a1931=_0x3e493d,{filename:_0x5e9dce,originalname:_0x2fb012,buffer:_0x1d73d4,dir:dir='ai',mimetype:_0x1fb793}=_0x46c272,_0xa25391=_0x1fb793?_0x1fb793['split']('/')[0x1]:'',_0x39f9ee=_0x2fb012||_0x5e9dce,{tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this['globalConfigService'][_0x5a1931(0x1f5)](['tencentCosStatus',_0x5a1931(0x225),_0x5a1931(0x202)]);if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1[(_0x5a1931(0x222))]('请先前往后台配置上传图片的方式',common_1['HttpStatus']['BAD_REQUEST']);if(Number(tencentCosStatus))return this['uploadFileByTencentCos']({'filename':_0x39f9ee,'buffer':_0x1d73d4,'dir':dir,'fileTyle':_0xa25391});if(Number(aliOssStatus))return await this[_0x5a1931(0x229)]({'filename':_0x39f9ee,'buffer':_0x1d73d4,'dir':dir,'fileTyle':_0xa25391});if(Number(cheveretoStatus)){const {filename:_0x22670a,buffer:_0x49d930,dir:_0xf880a8}=_0x46c272;return await this[_0x5a1931(0x1f1)]({'filename':_0x22670a,'buffer':_0x49d930[_0x5a1931(0x1fc)]('base64'),'dir':_0xf880a8,'fileTyle':_0xa25391});}}async['getUploadType'](){const _0x32d9da=_0x3e493d,{tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x32d9da(0x1c0)][_0x32d9da(0x1f5)](['tencentCosStatus','aliOssStatus',_0x32d9da(0x202)]);if(Number(tencentCosStatus))return _0x32d9da(0x213);if(Number(aliOssStatus))return _0x32d9da(0x1e6);if(Number(cheveretoStatus))return _0x32d9da(0x1d8);}async[_0x3e493d(0x1ff)]({filename:_0x3715f3,url:_0x1cf931,dir:dir='mj'}){const _0x2034a5=_0x3e493d;dir=process[_0x2034a5(0x200)][_0x2034a5(0x1e3)]?_0x2034a5(0x1ed):dir;const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this['globalConfigService'][_0x2034a5(0x1f5)]([_0x2034a5(0x1d2),'aliOssStatus',_0x2034a5(0x202)]);if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1[(_0x2034a5(0x222))](_0x2034a5(0x1d3),common_1[_0x2034a5(0x1dd)][_0x2034a5(0x1e9)]);if(Number(tencentCosStatus))return this[_0x2034a5(0x21c)]({'filename':_0x3715f3,'url':_0x1cf931,'dir':dir});if(Number(aliOssStatus)){const _0x49303b=await this[_0x2034a5(0x1db)]({'filename':_0x3715f3,'url':_0x1cf931,'dir':dir});return _0x49303b;}if(Number(cheveretoStatus))return await this[_0x2034a5(0x223)]({'filename':_0x3715f3,'url':_0x1cf931,'dir':dir});}async[_0x3e493d(0x1e1)]({filename:_0xff4ad7,buffer:_0x3443fe,dir:_0xcb3fbf,fileTyle:_0x17ac67}){const _0x50619f=_0x3e493d,{Bucket:_0x3b2908,Region:_0x58de2e,SecretId:_0x59f41c,SecretKey:_0x49de1c}=await this['getUploadConfig'](_0x50619f(0x213));this[_0x50619f(0x203)]=new TENCENTCOS({'SecretId':_0x59f41c,'SecretKey':_0x49de1c,'FileParallelLimit':0xa});try{return new Promise(async(_0x422962,_0x2de26b)=>{const _0x1cd5ea=_0x50619f,_0x415221=_0x17ac67||_0x1cd5ea(0x21a);this[_0x1cd5ea(0x203)]['putObject']({'Bucket':(0x0,utils_1[_0x1cd5ea(0x209)])(_0x3b2908),'Region':(0x0,utils_1[_0x1cd5ea(0x209)])(_0x58de2e),'Key':_0xcb3fbf+'/'+(_0xff4ad7||(0x0,utils_1['createRandomUid'])()+'.'+_0x17ac67),'StorageClass':_0x1cd5ea(0x1d6),'Body':_0x3443fe},async(_0x689b0f,_0x4c172d)=>{const _0x124b97=_0x1cd5ea;if(_0x689b0f)return console[_0x124b97(0x1d4)](_0x124b97(0x1c9),_0x689b0f),_0x2de26b(_0x689b0f);let _0x5a5bac=_0x4c172d['Location'][_0x124b97(0x21e)](/^(http:\/\/|https:\/\/|\/\/|)(.*)/,'https://$2');const {acceleratedDomain:_0xf0747b}=await this['getUploadConfig']('tencent');_0xf0747b&&(_0x5a5bac=_0x5a5bac[_0x124b97(0x21e)](/^(https:\/\/[^/]+)(\/.*)$/,_0x124b97(0x226)+_0xf0747b+'$2'),console['log'](_0x124b97(0x1ee),_0x5a5bac));;return common_1[_0x124b97(0x21b)]['debug'](_0x124b97(0x1cc),_0x5a5bac),_0x422962(_0x5a5bac);});});}catch(_0x504816){console[_0x50619f(0x1d4)](_0x50619f(0x1e5),_0x504816);throw new common_1[(_0x50619f(0x222))](_0x50619f(0x1f0),common_1['HttpStatus'][_0x50619f(0x1e9)]);}}async[_0x3e493d(0x21c)]({filename:_0x197a72,url:_0x40be92,dir:_0xfeeecb}){const _0x46597c=_0x3e493d,{Bucket:_0x258100,Region:_0xb10886,SecretId:_0x2bc414,SecretKey:_0x5e4723}=await this[_0x46597c(0x206)](_0x46597c(0x213));console[_0x46597c(0x1d4)](_0x46597c(0x1fb),_0x40be92),this[_0x46597c(0x203)]=new TENCENTCOS({'SecretId':_0x2bc414,'SecretKey':_0x5e4723,'FileParallelLimit':0xa});try{const _0x1c6d32=await this[_0x46597c(0x1c0)][_0x46597c(0x1f5)]([_0x46597c(0x21f)])||0x0,_0x13488f={'cosType':_0x46597c(0x213),'url':_0x40be92,'cosParams':{'Bucket':_0x258100,'Region':_0xb10886,'SecretId':_0x2bc414,'SecretKey':_0x5e4723}};console[_0x46597c(0x1d4)](_0x46597c(0x207),_0x13488f),common_1[_0x46597c(0x21b)]['debug'](_0x46597c(0x1de),_0x1c6d32);if(Number(_0x1c6d32)===0x6f){const _0x4d1f5e=await this[_0x46597c(0x1c0)][_0x46597c(0x1f5)](['mjProxyUrl'])||_0x46597c(0x228);console[_0x46597c(0x1d4)](_0x46597c(0x1ef),_0x4d1f5e);const _0x62de6d=await axios_1[_0x46597c(0x219)][_0x46597c(0x205)](_0x4d1f5e+_0x46597c(0x201),_0x13488f);if(!_0x62de6d[_0x46597c(0x211)])throw new common_1[(_0x46597c(0x222))](_0x46597c(0x1c4),common_1[_0x46597c(0x1dd)][_0x46597c(0x1e9)]);let _0x295276=_0x62de6d[_0x46597c(0x211)]['replace'](/^(http:\/\/|https:\/\/|\/\/|)(.*)/,'https://$2');const {acceleratedDomain:_0x3801b7}=await this[_0x46597c(0x206)](_0x46597c(0x213));return _0x3801b7&&(_0x295276=_0x295276['replace'](/^(https:\/\/[^/]+)(\/.*)$/,_0x46597c(0x226)+_0x3801b7+'$2'),console['log']('当前已开启全球加速----------------->')),_0x295276;}else try{console['log'](_0x46597c(0x1c3));try{console[_0x46597c(0x1d4)](_0x46597c(0x1ea)),console['log'](_0x46597c(0x1d5),_0x40be92);const _0x22ff7a=await this[_0x46597c(0x1cd)](_0x40be92);return console[_0x46597c(0x1d4)]('buffer4464'),await this['uploadFileByTencentCos']({'filename':_0x197a72,'buffer':_0x22ff7a,'dir':_0xfeeecb,'fileTyle':''});}catch(_0x549181){console[_0x46597c(0x1d4)]('error',_0x549181);}}catch(_0x2a01b2){console[_0x46597c(0x1d4)](_0x46597c(0x1c1),_0x2a01b2);}}catch(_0x1768ac){console[_0x46597c(0x1d4)](_0x46597c(0x215),_0x1768ac);throw new common_1['HttpException'](_0x46597c(0x1c4),common_1[_0x46597c(0x1dd)][_0x46597c(0x1e9)]);}}async[_0x3e493d(0x229)]({filename:_0x523a7e,buffer:_0x44bd78,dir:_0xf198ee,fileTyle:fileTyle='png'}){const _0x19e841=_0x3e493d,{region:_0x29a3e5,bucket:_0x2360d2,accessKeyId:_0x53f47f,accessKeySecret:_0x2d91a5}=await this[_0x19e841(0x206)](_0x19e841(0x1e6)),_0x3cbc30=new ALIOSS({'region':(0x0,utils_1[_0x19e841(0x209)])(_0x29a3e5),'accessKeyId':_0x53f47f,'accessKeySecret':_0x2d91a5,'bucket':(0x0,utils_1[_0x19e841(0x209)])(_0x2360d2)});try{return console['log'](_0x19e841(0x1da)),new Promise((_0x279613,_0xb02511)=>{const _0x4bbf60=_0x19e841;_0x3cbc30[_0x4bbf60(0x1bc)](_0xf198ee+'/'+(_0x523a7e||(0x0,utils_1[_0x4bbf60(0x1f8)])()+'.'+fileTyle),_0x44bd78)[_0x4bbf60(0x1f4)](_0x26e6dd=>{_0x279613(_0x26e6dd['url']);})[_0x4bbf60(0x20c)](_0x4cbd2f=>{_0xb02511(_0x4cbd2f);});});}catch(_0x3f11fc){throw new common_1['HttpException']('上传图片失败[ali]',common_1['HttpStatus']['BAD_REQUEST']);}}async[_0x3e493d(0x1db)]({filename:_0x37e97f,url:_0x3a7b93,dir:_0x2bad42}){const _0x1c4cb0=_0x3e493d,{region:_0x3e8462,bucket:_0x1c837f,accessKeyId:_0x3499a3,accessKeySecret:_0x219b85}=await this['getUploadConfig']('ali'),_0x2e2fa6=new ALIOSS({'region':_0x3e8462,'accessKeyId':_0x3499a3,'accessKeySecret':_0x219b85,'bucket':_0x1c837f});try{const _0x3fe7b3=await this[_0x1c4cb0(0x1c0)][_0x1c4cb0(0x1f5)]([_0x1c4cb0(0x21f)])||0x0;if(Number(_0x3fe7b3)===0x1){const _0x22c82b={'url':_0x3a7b93,'cosParams':{'region':_0x3e8462,'bucket':_0x1c837f,'accessKeyId':_0x3499a3,'accessKeySecret':_0x219b85},'cosType':_0x1c4cb0(0x1cf)},_0xcfa527=await this['globalConfigService'][_0x1c4cb0(0x1f5)](['mjProxyUrl'])||'http://172.247.48.137:8000',_0x251df6=await axios_1[_0x1c4cb0(0x219)][_0x1c4cb0(0x205)](_0xcfa527+'/mj/replaceUpload',_0x22c82b);if(!(_0x251df6===null||_0x251df6===void 0x0?void 0x0:_0x251df6[_0x1c4cb0(0x211)]))throw new common_1[(_0x1c4cb0(0x222))](_0x1c4cb0(0x1c5),common_1[_0x1c4cb0(0x1dd)][_0x1c4cb0(0x1e9)]);return _0x251df6[_0x1c4cb0(0x211)];}else{const _0x5aab25=await this[_0x1c4cb0(0x1cd)](_0x3a7b93);return await this['uploadFileByAliOss']({'filename':_0x37e97f,'buffer':_0x5aab25,'dir':_0x2bad42});}}catch(_0x95a9f7){throw new common_1['HttpException'](_0x1c4cb0(0x1c5),common_1['HttpStatus'][_0x1c4cb0(0x1e9)]);}}async[_0x3e493d(0x1f1)]({filename:filename='',buffer:_0x3c9547,dir:dir='ai',fileTyle:fileTyle='png'}){const _0x2c5ec3=_0x3e493d;var _0x54c1aa;const {key:_0x268183,uploadPath:_0x13397c}=await this[_0x2c5ec3(0x206)](_0x2c5ec3(0x1d8));let _0x516797=_0x13397c[_0x2c5ec3(0x204)]('/')?_0x13397c[_0x2c5ec3(0x1fd)](0x0,-0x1):_0x13397c;const _0x435add=new FormData();_0x435add[_0x2c5ec3(0x1d9)](_0x2c5ec3(0x1e8),_0x3c9547),_0x435add[_0x2c5ec3(0x1d9)]('key',_0x268183);try{const _0x4b9585=await axios_1[_0x2c5ec3(0x219)][_0x2c5ec3(0x205)](_0x516797,_0x435add,{'headers':{'X-API-Key':_0x268183}});if((_0x4b9585===null||_0x4b9585===void 0x0?void 0x0:_0x4b9585[_0x2c5ec3(0x1f2)])===0xc8)return _0x4b9585[_0x2c5ec3(0x211)][_0x2c5ec3(0x1ba)]['url'];else console[_0x2c5ec3(0x1d4)](_0x2c5ec3(0x1cb),_0x4b9585===null||_0x4b9585===void 0x0?void 0x0:_0x4b9585['data'][_0x2c5ec3(0x1e0)],_0x4b9585===null||_0x4b9585===void 0x0?void 0x0:_0x4b9585[_0x2c5ec3(0x211)][_0x2c5ec3(0x20f)]['message']),common_1[_0x2c5ec3(0x21b)][_0x2c5ec3(0x20f)](_0x2c5ec3(0x1b8),JSON['stringify'](_0x4b9585['data']));}catch(_0x3c01fc){console[_0x2c5ec3(0x1d4)](_0x2c5ec3(0x1e5),_0x3c01fc);throw new common_1['HttpException'](_0x2c5ec3(0x1dc)+((_0x54c1aa=_0x3c01fc['response'])===null||_0x54c1aa===void 0x0?void 0x0:_0x54c1aa[_0x2c5ec3(0x211)][_0x2c5ec3(0x20f)][_0x2c5ec3(0x20a)]),common_1[_0x2c5ec3(0x1dd)]['BAD_REQUEST']);}}async[_0x3e493d(0x223)]({filename:_0x53479e,url:_0x310458,dir:_0x27359d}){const _0x5cc2ea=_0x3e493d;try{const _0x2d7295=await this[_0x5cc2ea(0x1c0)][_0x5cc2ea(0x1f5)]([_0x5cc2ea(0x21f)])||0x0;if(Number(_0x2d7295)===0x270f){const {key:_0x5a1909,uploadPath:_0x4c81a3}=await this[_0x5cc2ea(0x206)](_0x5cc2ea(0x1d8));let _0x459c23=_0x4c81a3[_0x5cc2ea(0x204)]('/')?_0x4c81a3['slice'](0x0,-0x1):_0x4c81a3;const _0x4e1f31={'cosType':'chevereto','url':_0x310458,'cosParams':{'key':_0x5a1909,'uploadPath':_0x459c23}},_0x2daddc=await this[_0x5cc2ea(0x1c0)][_0x5cc2ea(0x1f5)]([_0x5cc2ea(0x1fa)])||'http://172.247.48.137:8000',_0x2d0a1e=await axios_1[_0x5cc2ea(0x219)][_0x5cc2ea(0x205)](_0x2daddc+_0x5cc2ea(0x201),_0x4e1f31);if(!_0x2d0a1e['data'])throw new common_1['HttpException'](_0x5cc2ea(0x220),common_1['HttpStatus'][_0x5cc2ea(0x1e9)]);return _0x2d0a1e['data'];}else{const _0x3d6a12=await this[_0x5cc2ea(0x1cd)](_0x310458);return await this[_0x5cc2ea(0x1f1)]({'filename':_0x53479e,'buffer':_0x3d6a12,'dir':_0x27359d});}}catch(_0x42ee17){console[_0x5cc2ea(0x1d4)](_0x5cc2ea(0x1e5),_0x42ee17);throw new common_1['HttpException'](_0x42ee17['response'],common_1[_0x5cc2ea(0x1dd)]['BAD_REQUEST']);}}async['getUploadConfig'](_0x1386c9){const _0x419f56=_0x3e493d;if(_0x1386c9===_0x419f56(0x1e6)){const {aliOssRegion:_0x14c7af,aliOssBucket:_0x2719df,aliOssAccessKeyId:_0x1359f9,aliOssAccessKeySecret:_0x520657}=await this[_0x419f56(0x1c0)]['getConfigs']([_0x419f56(0x1d7),_0x419f56(0x1be),_0x419f56(0x20d),_0x419f56(0x1bf)]);return{'region':_0x14c7af,'bucket':_0x2719df,'accessKeyId':_0x1359f9,'accessKeySecret':_0x520657};}if(_0x1386c9===_0x419f56(0x213)){const {cosBucket:_0x904411,cosRegion:_0x32f4ec,cosSecretId:_0x50fd50,cosSecretKey:_0x1b00ca,tencentCosAcceleratedDomain:_0x55268e}=await this[_0x419f56(0x1c0)][_0x419f56(0x1f5)]([_0x419f56(0x1bd),'cosRegion',_0x419f56(0x1ca),'cosSecretKey',_0x419f56(0x217)]);return{'Bucket':_0x904411,'Region':_0x32f4ec,'SecretId':_0x50fd50,'SecretKey':_0x1b00ca,'acceleratedDomain':_0x55268e};}if(_0x1386c9===_0x419f56(0x1d8)){const {cheveretoKey:_0x2a6ec1,cheveretoUploadPath:_0x1aed13}=await this[_0x419f56(0x1c0)][_0x419f56(0x1f5)]([_0x419f56(0x1f7),_0x419f56(0x1c2)]);return{'key':_0x2a6ec1,'uploadPath':_0x1aed13};}}async[_0x3e493d(0x1e2)](){const _0xaa45bd=_0x3e493d,_0xe23ed3={'filename':_0xaa45bd(0x1d0),'dir':'mj','url':_0xaa45bd(0x1c8)},_0x1b3f65=await this[_0xaa45bd(0x1ff)](_0xe23ed3);return console[_0xaa45bd(0x1d4)](_0xaa45bd(0x1fe),_0x1b3f65),_0x1b3f65;}async[_0x3e493d(0x1cd)](_0x3097ce){const _0x127f73=_0x3e493d,_0x566fa2=await this[_0x127f73(0x1c0)][_0x127f73(0x1f5)]([_0x127f73(0x21f)])||0x0,_0x5a42da=await axios_1[_0x127f73(0x219)][_0x127f73(0x20e)](_0x3097ce,{'responseType':_0x127f73(0x1b7)});return new Promise((_0x454bba,_0x70e745)=>{streamToBuffer(_0x5a42da['data'],(_0x1753e2,_0x2e8d6c)=>{const _0x4cec16=_0xe8cc;if(_0x1753e2)throw new common_1['HttpException'](_0x4cec16(0x216),common_1[_0x4cec16(0x1dd)][_0x4cec16(0x1e9)]);else _0x454bba(_0x2e8d6c);});});}};UploadService=__decorate([(0x0,common_1[_0x3e493d(0x1b5)])(),__metadata(_0x3e493d(0x1f3),[globalConfig_service_1[_0x3e493d(0x218)]])],UploadService),exports[_0x3e493d(0x1f6)]=UploadService;