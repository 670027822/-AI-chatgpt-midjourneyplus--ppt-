'use strict';const _0x213e0c=_0x501b;function _0x501b(_0xa060bd,_0x1244fd){const _0x43d081=_0x43d0();return _0x501b=function(_0x501be5,_0x57992e){_0x501be5=_0x501be5-0x110;let _0x36b01d=_0x43d081[_0x501be5];return _0x36b01d;},_0x501b(_0xa060bd,_0x1244fd);}(function(_0xd16cf,_0x17401c){const _0x2f6fc7=_0x501b,_0x113b25=_0xd16cf();while(!![]){try{const _0x157dee=-parseInt(_0x2f6fc7(0x120))/0x1+-parseInt(_0x2f6fc7(0x12d))/0x2+parseInt(_0x2f6fc7(0x111))/0x3+parseInt(_0x2f6fc7(0x117))/0x4*(parseInt(_0x2f6fc7(0x115))/0x5)+parseInt(_0x2f6fc7(0x131))/0x6+parseInt(_0x2f6fc7(0x113))/0x7*(-parseInt(_0x2f6fc7(0x119))/0x8)+parseInt(_0x2f6fc7(0x12a))/0x9;if(_0x157dee===_0x17401c)break;else _0x113b25['push'](_0x113b25['shift']());}catch(_0x4bcbf5){_0x113b25['push'](_0x113b25['shift']());}}}(_0x43d0,0x5de73));var __decorate=this&&this[_0x213e0c(0x12c)]||function(_0x3f9462,_0x21f224,_0x44c996,_0x14fef9){const _0x3ec9f4=_0x213e0c;var _0x581a44=arguments[_0x3ec9f4(0x12f)],_0x157c82=_0x581a44<0x3?_0x21f224:_0x14fef9===null?_0x14fef9=Object[_0x3ec9f4(0x139)](_0x21f224,_0x44c996):_0x14fef9,_0x1a1c39;if(typeof Reflect==='object'&&typeof Reflect[_0x3ec9f4(0x13a)]===_0x3ec9f4(0x12b))_0x157c82=Reflect[_0x3ec9f4(0x13a)](_0x3f9462,_0x21f224,_0x44c996,_0x14fef9);else{for(var _0x5085f4=_0x3f9462[_0x3ec9f4(0x12f)]-0x1;_0x5085f4>=0x0;_0x5085f4--)if(_0x1a1c39=_0x3f9462[_0x5085f4])_0x157c82=(_0x581a44<0x3?_0x1a1c39(_0x157c82):_0x581a44>0x3?_0x1a1c39(_0x21f224,_0x44c996,_0x157c82):_0x1a1c39(_0x21f224,_0x44c996))||_0x157c82;}return _0x581a44>0x3&&_0x157c82&&Object[_0x3ec9f4(0x11e)](_0x21f224,_0x44c996,_0x157c82),_0x157c82;},__metadata=this&&this['__metadata']||function(_0x5eafca,_0x270cc8){const _0x31d30b=_0x213e0c;if(typeof Reflect==='object'&&typeof Reflect[_0x31d30b(0x123)]==='function')return Reflect[_0x31d30b(0x123)](_0x5eafca,_0x270cc8);},__param=this&&this[_0x213e0c(0x124)]||function(_0x26051e,_0x5d7f26){return function(_0x5c6f00,_0x30ac1e){_0x5d7f26(_0x5c6f00,_0x30ac1e,_0x26051e);};};Object[_0x213e0c(0x11e)](exports,'__esModule',{'value':!![]}),exports[_0x213e0c(0x129)]=void 0x0;const common_1=require('@nestjs/common');let RedisCacheService=class RedisCacheService{constructor(_0x578784){this['redisClient']=_0x578784;}async[_0x213e0c(0x134)](){}['test'](){const _0x1c412=_0x213e0c;return this['redisClient']['set'](_0x1c412(0x133),0x6f),0x1;}async[_0x213e0c(0x138)](_0x385e8c){const _0x53ce2b=_0x213e0c,{key:_0x557a90}=_0x385e8c,_0x3a64f2=await this[_0x53ce2b(0x114)][_0x53ce2b(0x138)](_0x557a90);return await this['redisClient'][_0x53ce2b(0x138)](_0x557a90);}async['set'](_0x22a74c,_0x1b6d8c){const _0x572bb8=_0x213e0c;try{const {key:_0x32b397,val:_0x435c0f}=_0x22a74c;await this[_0x572bb8(0x114)][_0x572bb8(0x127)](_0x32b397,_0x435c0f),_0x1b6d8c&&await this['redisClient'][_0x572bb8(0x13b)](_0x32b397,_0x1b6d8c);return;}catch(_0x59191f){throw new common_1[(_0x572bb8(0x130))](_0x59191f,common_1['HttpStatus'][_0x572bb8(0x132)]);}}async[_0x213e0c(0x121)](_0x4633ec){const _0x371b2c=_0x213e0c;return await this[_0x371b2c(0x114)][_0x371b2c(0x121)](_0x4633ec);}async[_0x213e0c(0x12e)](_0x4b9b39){const _0x59396f=_0x213e0c,{key:_0x2726bd}=_0x4b9b39;await this[_0x59396f(0x114)][_0x59396f(0x12e)](_0x2726bd);return;}async[_0x213e0c(0x11c)](_0x1854c3,_0x45f1fe){const _0x2944c4=_0x213e0c,_0x163f90=await this[_0x2944c4(0x114)][_0x2944c4(0x136)](_0x2944c4(0x11f)+_0x1854c3,0x0,-0x1);await this['invalidateTokens'](_0x1854c3,_0x163f90),this[_0x2944c4(0x114)][_0x2944c4(0x127)]('token:'+_0x1854c3,_0x45f1fe);}async[_0x213e0c(0x126)](_0x2a4413,_0x4e0be9){_0x4e0be9['forEach'](_0x1490a9=>{const _0x266b4a=_0x501b;this[_0x266b4a(0x114)][_0x266b4a(0x12e)](_0x266b4a(0x135)+_0x2a4413+':'+_0x1490a9);});}async[_0x213e0c(0x122)](_0x10d258,_0x76e989){const _0x1ef593=_0x213e0c,{id:_0x5d2ccc,role:_0x1d08b0}=_0x76e989[_0x1ef593(0x11b)];if(_0x1d08b0===_0x1ef593(0x116))return!![];const _0x1f05b5=await this[_0x1ef593(0x114)][_0x1ef593(0x138)](_0x1ef593(0x135)+_0x5d2ccc);if(_0x1f05b5===null)return await this[_0x1ef593(0x114)][_0x1ef593(0x127)]('token:'+_0x5d2ccc,_0x10d258),!![];if(_0x1f05b5!==_0x10d258){if([_0x1ef593(0x118),'admin'][_0x1ef593(0x137)](_0x1d08b0))return!![];throw new common_1[(_0x1ef593(0x130))](_0x1ef593(0x125),common_1[_0x1ef593(0x11d)]['UNAUTHORIZED']);}}};function _0x43d0(){const _0x3443ce=['expire','Inject','2271729SEveTi','REDIS_CLIENT','377930ouOShv','redisClient','5thubGY','visitor','1851772KcUUPB','super','88OkmmlF','Injectable','user','saveToken','HttpStatus','defineProperty','tokens:','724087kRdCrR','ttl','checkTokenAuth','metadata','__param','您已在其他设备覆盖登录、请您重新登录！','invalidateTokens','set','design:paramtypes','RedisCacheService','432117hPxGZV','function','__decorate','24070lAegDb','del','length','HttpException','2678640VRVMED','BAD_REQUEST','aaa','onModuleInit','token:','zRange','includes','get','getOwnPropertyDescriptor','decorate'];_0x43d0=function(){return _0x3443ce;};return _0x43d0();}RedisCacheService=__decorate([(0x0,common_1[_0x213e0c(0x11a)])(),__param(0x0,(0x0,common_1[_0x213e0c(0x110)])(_0x213e0c(0x112))),__metadata(_0x213e0c(0x128),[Object])],RedisCacheService),exports[_0x213e0c(0x129)]=RedisCacheService;