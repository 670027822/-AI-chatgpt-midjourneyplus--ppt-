import{d as J,o as n,c as r,a as ie,b as x,u as ce,e as de,f as ue,r as m,g as pe,w as me,h as he,i as l,j as a,k as s,t as k,l as h,n as f,F as b,m as y,p as fe,q as ve,s as _e,v as ge,x as xe,N as ke,y as be,z as ye,A as we,L as Le,B as O,C as U,D as G,E as Ce,G as De,_ as Ie}from"./index-7811a262.js";import{_ as Ne}from"./titleBar.vue_vue_type_script_setup_true_lang-c8a111b8.js";import{_ as W}from"./index.vue_vue_type_style_index_0_lang-28ddd10e.js";import{f as H}from"./mjDraw-9719a349.js";import{N as Ee}from"./InputGroup-064ca109.js";import"./index-c94da121.js";const Se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Me=ie('<path d="M432 112V96a48.14 48.14 0 0 0-48-48H64a48.14 48.14 0 0 0-48 48v256a48.14 48.14 0 0 0 48 48h16" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></path><rect x="96" y="128" width="400" height="336" rx="45.99" ry="45.99" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><ellipse cx="372.92" cy="219.64" rx="30.77" ry="30.55" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></ellipse><path d="M342.15 372.17L255 285.78a30.93 30.93 0 0 0-42.18-1.21L96 387.64" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M265.23 464l118.59-117.73a31 31 0 0 1 41.46-1.87L496 402.91" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>',5),Be=[Me],ze=J({name:"ImagesOutline",render:function(A,P){return n(),r("svg",Se,Be)}}),w=v=>(_e("data-v-fb81b057"),v=v(),ge(),v),Ae={class:"flex my-5",style:{"margin-bottom":"0.25rem","margin-top":"0rem"}},Pe=w(()=>s("p",{class:"mx-2 text-[#707384] select-none flex-shrink-0"}," Prompt示例： ",-1)),$e={class:"text-[#707384]"},je={class:"flex items-center mt-5",style:{"padding-top":"0.25rem","margin-top":"0rem"}},qe=w(()=>s("span",{class:"mr-2 inline-block w-16 flex-shrink-0"},"图片尺寸:",-1)),Fe=["onClick"],Te={class:"flex items-center mt-5",style:{"margin-top":"0.25rem"}},Ve=w(()=>s("span",{class:"mr-2 inline-block w-16 flex-shrink-0"},"生图消耗:",-1)),Oe={style:{"padding-top":"0.5rem","margin-top":"0rem","padding-bottom":"0rem"}},Ue=w(()=>s("div",{class:"tishiciwb"},[s("p",null,"参考提示词")],-1)),Ge={class:"app-container"},We={class:"filter-container"},He=["onClick"],Je={class:"gallery-container"},Ke=["src","alt","onClick"],Qe={class:"photo-name"},Re={key:0,class:"mt-8 pb-10"},Xe=w(()=>s("div",{class:"flex justify-center"}," ----------- 正在生成中、图片越大数量越多所需时间越多、预计25S ----------- ",-1)),Ye={class:"flex flex-wrap mt-8"},Ze={key:0,class:"min-h-screen"},et={key:0,class:"min-h-screen"},tt=J({__name:"index",setup(v){const A=x(()=>$.theme),P=ce(),K=x(()=>A.value==="dark"?"#fff":"#000"),{isMobile:_}=de(),$=ue(),Q=x(()=>P.isLogin),L=m(0),u=m(!1),N=pe(),E=m([]),S=m([]),R=x(()=>$.theme==="dark");me(Q,async(t,o)=>{t&&!o&&M()});const j=["超级逼真的未来世界，真实照片，虚幻引擎","帅哥，二次元，赛博朋克风格，精致脸庞","兔子，可爱，高质量，高品质"],X=[{label:"1024x1024",value:"1024x1024"},{label:"1024x1792",value:"1024x1792"},{label:"1792x1024",value:"1792x1024"}],Y=[{label:"1024x1024=2积分，余下=4积分",value:"standard"}],i=m({prompt:"",n:1,size:"1024x1024"});function Z(){L.value=L.value+1>=j.length?0:L.value+1}async function M(){const t=await xe({model:"DALL-E2"});t.success&&(E.value=V(t.data))}async function q(){const t=await ve({size:999,rec:1,model:"DALL-E2"});if(!t.success)return N.error(t.message);S.value=V(t.data.rows)}function F(){}function T(t){i.value.prompt=t}function V(t){if(!t)return[];const o=[];return t.forEach(e=>{const{id:p,fileInfo:c,prompt:D,thumbImg:I}=e;let d=null;if(typeof c=="string")try{d=JSON.parse(c)}catch{d={}}else d=c||{};const{width:B,height:z,cosUrl:re}=d;o.push({id:p,prompt:D,fullPrompt:D,fileInfo:{thumbImg:I,width:B,height:z,cosUrl:re}})}),o.filter(e=>e.fileInfo&&e.fileInfo.width)}async function ee(){if(!i.value.prompt)return N.error("请输入您想要生成的图片描述信息！");try{u.value=!0,await De(i.value),N.success("生成图片成完成、前往我的生成查看图片！"),await M(),u.value=!1}catch{u.value=!1}}function te(t){t==="mine"&&M(),t==="all"&&q()}he(()=>{q();const t=H(se);console.log("tishicires",t),t.then(o=>{console.log(o.data),g.value=o.data}).catch(o=>{console.error("Error fetching data: ",o)})});const se={fenlei:"风格"},ae=["风格","影游","国风","时尚","布局","建筑","大师","灯光","材质","色系","视角","场景","人物"],C=m("风格"),oe=t=>{C.value=t;const o=g.value.some(c=>c.fenlei===t);let e=0;function p(c){const D={fenlei:t,skip:0+c*3,take:3};if(!o){const I=H(D);I&&I.then(d=>{if(d.data[0])d.data.forEach((B,z)=>{setTimeout(()=>{g.value.push(B)},z*200)}),c=c+1,p(c);else return}).catch(d=>{console.error("Error fetching data: ",d)})}}p(e)},g=m([]),ne=x(()=>C.value?g.value.filter(t=>t.fenlei===C.value):g.value);function le(t){i.value.prompt+=t+", "}return(t,o)=>(n(),r("div",{class:f(["main min-h-screen bg-center dark:bg-[#2F2E34]",[a(R)?"darkBg":"lightBg",a(_)?"px-3":"px-10"]])},[l(a(Ne),{title:"DALL-E绘画",des:"基于DALL-E3的绘画、速度较快、同步等待到结束后在我的绘画中可以看到结果！",padding:a(_)?2:20},null,8,["padding"]),s("div",{class:f(a(_)?["px-2"]:["px-20"])},[s("div",Ae,[s("b",{class:"text-primary cursor-pointer select-none flex-shrink-0",onClick:Z},"换示例"),Pe,s("p",$e,k(j[L.value]),1)]),l(a(Ee),null,{default:h(()=>[l(a(ke),{value:i.value.prompt,"onUpdate:value":o[0]||(o[0]=e=>i.value.prompt=e),disabled:u.value,clearable:"",placeholder:"此处输入图片描述、我们将会对其转为英文绘画、请知悉！"},null,8,["value","disabled"]),l(a(be),{type:"success",loading:u.value,disabled:u.value,onClick:ee},{icon:h(()=>[l(a(ye),null,{default:h(()=>[l(a(ze))]),_:1})]),default:h(()=>[we(" 生成图片 ")]),_:1},8,["loading","disabled"])]),_:1}),s("div",{class:f(["mt-5 py-4 bg-[#e7eaf380] dark:bg-[#2c2c32] rounded-lg",a(_)?"px-0":"px-4"]),style:{"padding-top":"0.5rem","margin-top":"0rem","padding-bottom":"0rem"}},[s("div",je,[qe,s("div",null,[(n(),r(b,null,y(X,e=>s("span",{key:e.value,class:f(["rounded ml-2 select-none cursor-pointer inline-block mb-2",[e.value===i.value.size?["text-primary","bg-[#0d6efd1c]"]:["bg-[#bfc4d033]"],a(_)?"px-1.5 py-0.5":"px-3 py-1"]]),style:{"padding-right":"0rem","padding-left":"0rem"},onClick:p=>i.value.size=e.value},k(e.label),11,Fe)),64))])]),s("div",Te,[Ve,s("div",null,[(n(),r(b,null,y(Y,e=>s("span",{key:e.value,class:f(["py-0.5 px-2.5 rounded ml-2 select-none cursor-pointer inline-block mb-2",e.value===i.value.quality?["text-primary","bg-[#0d6efd1c]"]:["bg-[#bfc4d033]"]])},k(e.label),3)),64))])])],2),s("div",Oe,[Ue,s("div",Ge,[s("div",We,[(n(),r(b,null,y(ae,e=>s("button",{key:e,class:f(["filter-button",{selected:C.value===e}]),onClick:p=>oe(e)},k(e),11,He)),64))]),s("div",Je,[(n(!0),r(b,null,y(a(ne),e=>(n(),r("div",{key:e.id,class:"photo-card"},[s("img",{src:e.src,alt:e.name,class:"photo-image",onClick:p=>le(e.name)},null,8,Ke),s("div",Qe,k(e.name),1)]))),128))])])]),u.value?(n(),r("div",Re,[Xe,s("div",Ye,[(n(!0),r(b,null,y(i.value.n,e=>(n(),r("div",{class:"w-44 h-44 border rounded-md relative ml-4 mt-4",key:e},[l(Le,{"text-color":a(K),words:["图","片","绘","制","中"]},null,8,["text-color"])]))),128))])])):fe("",!0),l(a(Ce),{type:"line",animated:"",class:"mt-5","onUpdate:value":te},{default:h(()=>[l(a(O),{name:"all",tab:"公共生成"},{default:h(()=>[S.value.length?(n(),r("div",Ze,[l(W,{onLoadMore:F,usePropmpt:"",gap:8,preOrigin:"",onUsePropmptDraw:T,dataList:S.value,scaleWidth:50},null,8,["dataList"])])):(n(),U(a(G),{key:1,size:"huge",class:"mt-20",description:"暂无数据哟~"}))]),_:1}),l(a(O),{name:"mine",tab:"我的生成"},{default:h(()=>[E.value.length?(n(),r("div",et,[l(W,{onLoadMore:F,usePropmpt:"",gap:8,preOrigin:"",onUsePropmptDraw:T,dataList:E.value,scaleWidth:50},null,8,["dataList"])])):(n(),U(a(G),{key:1,size:"huge",class:"mt-20",description:"暂无数据哟~"}))]),_:1})]),_:1})],2)],2))}});const ct=Ie(tt,[["__scopeId","data-v-fb81b057"]]);export{ct as default};
